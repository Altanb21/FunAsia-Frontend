(()=>{var t={1673:function(t,e,n){var i,o,r;function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}r=function(){"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==s(Symbol.iterator)?function(t){return s(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":s(t)})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function i(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}function r(t){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function c(t,e){return!e||"object"!=s(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function h(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=r(t);if(e){var o=r(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return c(this,n)}}function u(t,e,n){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=r(t)););return t}(t,e);if(i){var o=Object.getOwnPropertyDescriptor(i,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function l(t){return t instanceof d}var p={setEventEmitter:function(t,e){return void 0===e&&(e=Phaser.Events.EventEmitter),this._privateEE=!0===t||void 0===t,this._eventEmitter=this._privateEE?new e:t,this},destroyEventEmitter:function(){return this._eventEmitter&&this._privateEE&&this._eventEmitter.shutdown(),this},getEventEmitter:function(){return this._eventEmitter},on:function(){return this._eventEmitter&&this._eventEmitter.on.apply(this._eventEmitter,arguments),this},once:function(){return this._eventEmitter&&this._eventEmitter.once.apply(this._eventEmitter,arguments),this},off:function(){return this._eventEmitter&&this._eventEmitter.off.apply(this._eventEmitter,arguments),this},emit:function(t){return this._eventEmitter&&t&&this._eventEmitter.emit.apply(this._eventEmitter,arguments),this},addListener:function(){return this._eventEmitter&&this._eventEmitter.addListener.apply(this._eventEmitter,arguments),this},removeListener:function(){return this._eventEmitter&&this._eventEmitter.removeListener.apply(this._eventEmitter,arguments),this},removeAllListeners:function(){return this._eventEmitter&&this._eventEmitter.removeAllListeners.apply(this._eventEmitter,arguments),this},listenerCount:function(){return this._eventEmitter?this._eventEmitter.listenerCount.apply(this._eventEmitter,arguments):0},listeners:function(){return this._eventEmitter?this._eventEmitter.listeners.apply(this._eventEmitter,arguments):[]},eventNames:function(){return this._eventEmitter?this._eventEmitter.eventNames.apply(this._eventEmitter,arguments):[]}},d=Phaser.Scene,f=Phaser.Utils.Objects.GetValue,v=function(){function n(i,o){var r;e(this,n),this.parent=i,this.scene=null==(r=i)||"object"!==t(r)?null:l(r)?r:r.scene&&l(r.scene)?r.scene:r.parent&&r.parent.scene&&l(r.parent.scene)?r.parent.scene:void 0,this.isShutdown=!1,this.setEventEmitter(f(o,"eventEmitter",!0)),this.parent&&this.parent===this.scene?this.scene.events.once("shutdown",this.onSceneDestroy,this):this.parent&&this.parent.once&&this.parent.once("destroy",this.onParentDestroy,this)}return i(n,[{key:"shutdown",value:function(){this.isShutdown||(this.parent&&this.parent===this.scene?this.scene.events.off("shutdown",this.onSceneDestroy,this):this.parent&&this.parent.once&&this.parent.off("destroy",this.onParentDestroy,this),this.destroyEventEmitter(),this.parent=void 0,this.scene=void 0,this.isShutdown=!0)}},{key:"destroy",value:function(t){this.shutdown(t)}},{key:"onSceneDestroy",value:function(){this.destroy(!0)}},{key:"onParentDestroy",value:function(t,e){this.destroy(e)}}]),n}();Object.assign(v.prototype,p);var m=Phaser.Utils.Objects.GetValue,y=function(){o(n,v);var t=h(n);function n(i,o){var r;return e(this,n),(r=t.call(this,i,o))._enable=void 0,i.setInteractive(m(o,"inputConfig",void 0)),r.resetFromJSON(o),r.boot(),r}return i(n,[{key:"resetFromJSON",value:function(t){return this.pointer=void 0,this.lastClickTime=void 0,this.setEnable(m(t,"enable",!0)),this.setMode(m(t,"mode",1)),this.setClickInterval(m(t,"clickInterval",100)),this.setDragThreshold(m(t,"threshold",void 0)),this}},{key:"boot",value:function(){var t=this.parent;t.on("pointerdown",this.onPress,this),t.on("pointerup",this.onRelease,this),t.on("pointerout",this.onPointOut,this),t.on("pointermove",this.onMove,this)}},{key:"shutdown",value:function(t){this.isShutdown||(this.pointer=null,u(r(n.prototype),"shutdown",this).call(this,t))}},{key:"enable",get:function(){return this._enable},set:function(t){if(this._enable!==t){t||this.cancel();var e=(this._enable=t)?"enable":"disable";this.emit(e,this,this.parent)}}},{key:"setEnable",value:function(t){return void 0===t&&(t=!0),this.enable=t,this}},{key:"toggleEnable",value:function(){return this.setEnable(!this.enable),this}},{key:"setMode",value:function(t){return"string"==typeof t&&(t=g[t]),this.mode=t,this}},{key:"setClickInterval",value:function(t){return this.clickInterval=t,this}},{key:"setDragThreshold",value:function(t){return this.dragThreshold=t,this}},{key:"onPress",value:function(t,e,n,i){void 0===this.pointer&&(this.pointer=t,0===this.mode&&this.click(t.downTime,t,i))}},{key:"onRelease",value:function(t,e,n,i){this.pointer===t&&(1===this.mode&&this.click(t.upTime,t,i),this.pointer=void 0)}},{key:"onPointOut",value:function(t){this.pointer===t&&this.cancel()}},{key:"onMove",value:function(t){this.pointer===t&&void 0!==this.dragThreshold&&t.getDistance()>=this.dragThreshold&&this.cancel()}},{key:"click",value:function(t,e,n){if(!this.enable)return this;if(void 0===t)return this.emit("click",this,this.parent,e,n),this;this.pointer=void 0;var i=this.lastClickTime;return void 0!==i&&t-i<=this.clickInterval||(this.lastClickTime=t,this.emit("click",this,this.parent,e,n)),this}},{key:"cancel",value:function(){return this.pointer=void 0,this}}]),n}(),g={press:0,pointerdown:0,release:1,pointerup:1};return function(){o(n,Phaser.Plugins.BasePlugin);var t=h(n);function n(i){return e(this,n),t.call(this,i)}return i(n,[{key:"start",value:function(){this.game.events.on("destroy",this.destroy,this)}},{key:"add",value:function(t,e){return new y(t,e)}}]),n}()},"object"==s(e)?t.exports=r():void 0===(o="function"==typeof(i=r)?i.call(e,n,e,t):i)||(t.exports=o)},9206:function(t,e,n){var i,o,r;function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}r=function(){"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==s(Symbol.iterator)?function(t){return s(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":s(t)})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function i(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}function r(t){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function c(t,e){return!e||"object"!=s(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function h(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=r(t);if(e){var o=r(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return c(this,n)}}function u(t,e,n){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=r(t)););return t}(t,e);if(i){var o=Object.getOwnPropertyDescriptor(i,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function l(t,e,n){return void 0===n&&(n="image"),t[e]||(t[e]=t.scene.make[n]({add:!1,origin:{x:0,y:0}}),t.on("destroy",(function(){t[e]&&(t[e].destroy(),t[e]=void 0)}))),t[e]}function p(t,e,n){return"__BASE"===n?"".concat(t,",").concat(e):"".concat(n,"_").concat(t,",").concat(e)}var d=Phaser.Utils.Objects.IsPlainObject,f=Phaser.Utils.Objects.GetValue,v=function(t){return"string"==typeof t&&(t=m[t]),t},m={scale:0,repeat:1},y={setTexture:function(t,e,n,i){Array.isArray(e)&&(i=n,n=e,e=void 0),void 0===e&&(e="__BASE"),this.textureKey=t,this.baseFrameName=e,this.columns.data=n,this.columns.count=n?n.length:0,this.columns.stretch=0,this.columns.minWidth=0,this.rows.data=i,this.rows.count=i?i.length:0,this.rows.stretch=0,this.rows.minHeight=0;var o=this.scene.textures.get(t);if(!o)return this.clear(),this;if(!n||!i)return this.clear(),this;for(var r=o.frames[e],s=r.width,a=0,c=0,h=n.length;c<h;c++)void 0===n[c]?a++:"number"==typeof n[c]?s-=n[c]:s-=n[c].width;var u=s/a,l=r.height,p=0;for(c=0,h=i.length;c<h;c++)void 0===i[c]?p++:"number"==typeof i[c]?l-=i[c]:l-=i[c].width;for(var d,f,v,m,y,g=l/p,_=0,b=0,E=0,S=i.length;E<S;E++){void 0===i[E]&&(i[E]=g),"number"==typeof i[E]&&(i[E]={height:i[E],stretch:E%2}),v=(d=i[E]).height,this.rows.stretch+=0|d.stretch,this.rows.minHeight+=0<d.stretch?0:v,c=_=0;for(var w=n.length;c<w;c++)void 0===n[c]&&(n[c]=u),"number"==typeof n[c]&&(n[c]={width:n[c],stretch:c%2}),m=(f=n[c]).width,0===E&&(this.columns.stretch+=0|f.stretch,this.columns.minWidth+=0<f.stretch?0:m),1<=m&&1<=v?(y=this.getFrameNameCallback(c,E,e))&&o.add(y,0,_+r.cutX,b+r.cutY,m,v):console.warn("Size of Grid(".concat(c,",").concat(E,") = ").concat(m,"x").concat(v,", which is invalid")),_+=m;b+=v}return this.updateTexture(),this},updateTexture:function(){if(this.clear(),void 0===this.textureKey)return this;var t=this.scene.textures.get(this.textureKey);if(!t)return this;var e,n,i=this.width-this.columns.minWidth;n=0<=i?(e=0<this.columns.stretch?i/this.columns.stretch:0,1):(e=0,this.width/this.columns.minWidth);var o,r,s,a,c,h,u,p=this.height-this.rows.minHeight;r=0<=p?(o=0<this.rows.stretch?p/this.rows.stretch:0,1):(o=0,this.height/this.rows.minHeight);for(var d,f=0,v=0,m=0,y=this.rows.count;m<y;m++){u=0===(c=this.rows.data[m]).stretch?c.height*r:o*c.stretch;for(var g=f=0,_=this.columns.count;g<_;g++)h=0===(a=this.columns.data[g]).stretch?a.width*n:e*a.stretch,(s=this.getFrameNameCallback(g,m,this.baseFrameName))&&0<h&&0<u&&t.has(s)&&(0==(0===c.stretch&&0===a.stretch||0===this.getStretchMode(g,m)?0:1)?(d=l(this,"_image","image")).setTexture(this.textureKey,s).setDisplaySize(h,u):(d=l(this,"_tileSprite","tileSprite")).setTexture(this.textureKey,s).setSize(h,u)),d&&(this.draw(d,f,v),d=void 0),f+=h;v+=u}},setStretchMode:function(t){return d(t)?(this.stretchMode.edge=v(f(t,"edge",0)),this.stretchMode.internal=v(f(t,"internal",0))):(t=v(t),this.stretchMode.edge=t,this.stretchMode.internal=t),this},getStretchMode:function(t,e){return function(t,e){return 0===t||t===this.columns.count-1||0===e||e===this.rows.count-1}.call(this,t,e)?this.stretchMode.edge:this.stretchMode.internal}},g=Phaser.GameObjects.RenderTexture,_=Phaser.Utils.Objects.IsPlainObject,b=Phaser.Utils.Objects.GetValue,E=function(){o(n,g);var t=h(n);function n(i,o,r,s,a,c,h,u,l,p){var d;return e(this,n),_(o)?(o=b(p=o,"x",0),r=b(p,"y",0),s=b(p,"width",1),a=b(p,"height",1),c=b(p,"key",void 0),h=b(p,"baseFrame",void 0),u=b(p,"columns",void 0),l=b(p,"rows",void 0)):_(s)?(s=b(p=s,"width",1),a=b(p,"height",1),c=b(p,"key",void 0),h=b(p,"baseFrame",void 0),u=b(p,"columns",void 0),l=b(p,"rows",void 0)):_(c)?(c=b(p=c,"key",void 0),h=b(p,"baseFrame",void 0),u=b(p,"columns",void 0),l=b(p,"rows",void 0)):_(h)?(h=b(p=h,"baseFrame",void 0),u=b(p,"columns",void 0),l=b(p,"rows",void 0)):Array.isArray(h)?(p=l,l=u,u=h,h=b(p,"baseFrame",void 0)):_(u)&&(u=b(p=u,"columns",void 0),l=b(p,"rows",void 0)),(d=t.call(this,i,o,r,s,a)).columns={},d.rows={},d.stretchMode={},d._tileSprite=void 0,d._image=void 0,d.setOrigin(.5,.5),d.setGetFrameNameCallback(b(p,"getFrameNameCallback",void 0)),d.setStretchMode(b(p,"stretchMode",0)),d.setTexture(c,h,u,l),d}return i(n,[{key:"setGetFrameNameCallback",value:function(t){return void 0===t&&(t=p),this.getFrameNameCallback=t,this}},{key:"minWidth",get:function(){return this.columns.minWidth}},{key:"minHeight",get:function(){return this.rows.minHeight}},{key:"resize",value:function(t,e){return this.width===t&&this.height===e||(u(r(n.prototype),"resize",this).call(this,t,e),this.updateTexture()),this}}]),n}();function S(t,e,n,i,o,r,s,a,c){var h=new E(this.scene,t,e,n,i,o,r,s,a,c);return this.scene.add.existing(h),h}Object.assign(E.prototype,y);var w=Phaser.GameObjects.BuildGameObject;function T(t,e){void 0===t&&(t={}),void 0!==e&&(t.add=e);var n=new E(this.scene,t);return w(this.scene,n,t),n}function C(t){return null==t||""===t||0===t.length}var O=function(){o(n,Phaser.Plugins.BasePlugin);var t=h(n);function n(i){var o;return e(this,n),o=t.call(this,i),i.registerGameObject("rexNinePatch",S,T),o}return i(n,[{key:"start",value:function(){this.game.events.on("destroy",this.destroy,this)}}]),n}();return function(e,n,i){if("object"===t(e))if(C(n)){if(null==i)return;"object"===t(i)&&(e=i)}else{"string"==typeof n&&(n=n.split("."));var o=n.pop();(function(e,n,i){var o=e;if(!C(n)){var r;"string"==typeof n&&(n=n.split("."));for(var s=0,a=n.length;s<a;s++){var c;null!=o[r=n[s]]&&"object"===t(o[r])||(c={},o[r]=c),o=o[r]}}return o}(e,n))[o]=i}}(window,"RexPlugins.GameObjects.NinePatch",E),O},"object"==s(e)?t.exports=r():void 0===(o="function"==typeof(i=r)?i.call(e,n,e,t):i)||(t.exports=o)},6650:function(t,e){!function(t){"use strict";var e=function(t){return function(e){var n=t(e);return e.add(n),n}},n=function(t){return function(e,n){return t.set(e,n),n}},i=void 0===Number.MAX_SAFE_INTEGER?9007199254740991:Number.MAX_SAFE_INTEGER,o=536870912,r=2*o,s=function(t,e){return function(n){var s=e.get(n),a=void 0===s?n.size:s<r?s+1:0;if(!n.has(a))return t(n,a);if(n.size<o){for(;n.has(a);)a=Math.floor(Math.random()*r);return t(n,a)}if(n.size>i)throw new Error("Congratulations, you created a collection of unique numbers which uses all available integers!");for(;n.has(a);)a=Math.floor(Math.random()*i);return t(n,a)}},a=new WeakMap,c=n(a),h=s(c,a),u=e(h);t.addUniqueNumber=u,t.generateUniqueNumber=h,Object.defineProperty(t,"__esModule",{value:!0})}(e)},3505:function(t,e,n){"use strict";var i=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(o,r){function s(t){try{c(i.next(t))}catch(t){r(t)}}function a(t){try{c(i.throw(t))}catch(t){r(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((i=i.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var n,i,o,r,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,i=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==r[0]&&2!==r[0])){s=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){s.label=r[1];break}if(6===r[0]&&s.label<o[1]){s.label=o[1],o=r;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(r);break}o[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(t){r=[6,t],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.initGame=void 0;var r=n(490),s=n(9206),a=n(1673),c=n(5080);n(6563),n(7771);var h=n(3355),u=Phaser.Core.Events.PAUSE,l=Phaser.Core.Events.RESUME,p={type:Phaser.WEBGL,parent:"game-player-wrap",canvas:document.getElementById("game-player-canvas"),disableContextMenu:!0,render:{clearBeforeRender:!0},scale:{width:1800,height:900,mode:Phaser.Scale.ScaleModes.WIDTH_CONTROLS_HEIGHT},plugins:{scene:[{key:"DragonBones",plugin:dragonBones.phaser.plugin.DragonBonesScenePlugin,mapping:"dragonbone"},{key:"AssetsLoader",plugin:c.AssetsLoader,mapping:"loader"}],global:[{key:"rexninepatchplugin",plugin:s,start:!0},{key:"rexButton",plugin:a,start:!0}]}},d=null;function f(){null!==d&&d.scale.updateBounds()}function v(){window.removeEventListener("react-scrolling",f),window.removeEventListener("destroyEngine",v),d&&(d.destroy(!1,!1),Phaser.Plugins.PluginCache.remove("DragonBones"),Phaser.Plugins.PluginCache.remove("SpinePlugin"),Phaser.Plugins.PluginCache.remove("AssetsLoader"),d=null)}function m(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Phaser.Utils.Objects.IsPlainObject;return t.reduce((function(t,e){return Object.keys(e).forEach((function(i){var o=t[i],r=e[i];Array.isArray(o)&&Array.isArray(r)?t[i]=o.concat.apply(o,r):n(o)&&n(r)?t[i]=m(o,r):t[i]=r})),t}),{})}e.initGame=function(t){return i(void 0,void 0,void 0,(function(){var e;return o(this,(function(i){switch(i.label){case 0:return[4,r.Utils.checkSupportedWebP()];case 1:return i.sent(),e=m(p,t||{}),d=new Phaser.Game(e),function(){if(null!==d){d.input.mouse.preventDefaultWheel=!1;var t=0;d.events.on(u,(function(){d&&(d.loop.resume(),t=h.setInterval((function(){d&&d.loop.step()}),1e3/60))})),d.events.on(l,(function(){d&&h.clearInterval(t)})),window.addEventListener("react-scrolling",f),window.addEventListener("destroyEngine",v)}}(),n.g.game=d,[2,d]}}))}))}},6871:function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.CompoMenu=e.DIRECTION=e.THEME_EVENT=e.BOARD_STYLES=e.MODE_STYLES=void 0;var r,s,a,c,h=Phaser.Input.Events.POINTER_DOWN,u=n(5080),l=n(8356),p=n(2804);!function(t){t[t.LIGHT=0]="LIGHT",t[t.DARK=1]="DARK"}(r=e.MODE_STYLES||(e.MODE_STYLES={})),function(t){t[t.ZERO=0]="ZERO",t[t.ONE=1]="ONE"}(s=e.BOARD_STYLES||(e.BOARD_STYLES={})),function(t){t.MODE="changeMode",t.SOUND="changeSound",t.MUSIC="changeMusic"}(a=e.THEME_EVENT||(e.THEME_EVENT={})),function(t){t[t.VERTICAL=0]="VERTICAL",t[t.HORIZONTAL=1]="HORIZONTAL"}(c=e.DIRECTION||(e.DIRECTION={}));var d="core/menu-click",f=function(t){function e(e,n){void 0===n&&(n=l.Config.MENU);var i=t.call(this,e)||this;return i._atlasMisc=i.scene.textures.get("core/AtlasMisc"),i.background=i.scene.add.rexNinePatch(0,0,2,2),i.toggleMode=null,i.sound=null,i.soundMusic=null,i.modeStyle=r.LIGHT,i.direction=c.VERTICAL,i.boardStyle=s.ZERO,i.isSoundOn=!0,i.isSoundMusicOn=!0,i._listButton=[],i._listLines=[],i.background.setOrigin(0,0),i.add(i.background),n.toggleMode&&(i.toggleMode=new p.ToggleMode(i.scene),i.toggleMode.on(p.EventToggleMode.CHANGE_MODE,i.onChangeTheme,i),i.add(i.toggleMode),i._listButton.push(i.toggleMode)),n.sound&&(i.sound=i.scene.add.image(0,0,i._atlasMisc,"unmute"),i.add(i.sound),i.sound.setInteractive({useHandCursor:!0}),i.sound.on(h,i.onChangeSound,i),i.sound.setScrollFactor(0),i._listButton.push(i.sound)),n.music&&(i.soundMusic=i.scene.add.image(0,0,i._atlasMisc,"unmute_music"),i.add(i.soundMusic),i.soundMusic.setInteractive({useHandCursor:!0}),i.soundMusic.on(h,i.onChangeSoundMusic,i),i.soundMusic.setScrollFactor(0),i._listButton.push(i.soundMusic)),i.changeBoardStyle(i.boardStyle),i.sortAll(),i.onChangeMode(i.scene.game.device.os.desktop),i}return o(e,t),e.prototype.changeDirection=function(t){this.direction=t,this.sortAll()},e.prototype.interactiveMode=function(t){null!==this.toggleMode&&this.toggleMode.interactiveMode(t)},e.prototype.changeBoardStyle=function(t){this.boardStyle=t,this.boardStyle===s.ZERO?this.background.setTexture("core/AtlasNinePatch","board-0",[13*u.DPR,void 0,13*u.DPR],[13*u.DPR,void 0,13*u.DPR]):this.background.setTexture("core/AtlasNinePatch","board-1",[28*u.DPR,void 0,28*u.DPR],[19*u.DPR,void 0,19*u.DPR])},e.prototype.setTheme=function(t){this.modeStyle=t,null!==this.toggleMode&&(this.modeStyle===r.LIGHT?this.toggleMode.setLightMode():this.toggleMode.setDarkMode()),this.emit(a.MODE,this.modeStyle)},e.prototype._playSoundClick=function(){if(this.scene.game.cache.audio.get(d)){var t=this.scene.sound.get(d);null===t&&(t=this.scene.sound.add(d)),t.play()}},e.prototype.onChangeMode=function(t){null!==this.background&&this.background.setVisible(t);for(var e=0;e<this._listLines.length;e++)this._listLines[e].setVisible(t)},e.prototype.onChangeTheme=function(){this._playSoundClick(),this.modeStyle=this.modeStyle===r.LIGHT?r.DARK:r.LIGHT,this.emit(a.MODE,this.modeStyle)},e.prototype.sortAll=function(){var t={width:0,height:0};this.scene.game.device.os.desktop?this.sortButtonsDesktop(t):this.sortButtons(t),this.sortLines(t),this.background.resize(t.width,t.height)},e.prototype.sortButtons=function(t){for(var e=20*u.DPR,n=0;n<this._listButton.length;n++){var i=this._listButton[n];this.direction===c.VERTICAL?(i.setPosition(0,e+40*n*u.DPR),t.width=Math.max(i.displayWidth,t.width),t.height=i.y+e):(i.setPosition(e+40*n*u.DPR,0),t.width=i.x+e,t.height=Math.max(i.displayHeight+e,t.height))}this.direction===c.VERTICAL?this.background.setOrigin(.5,0):this.background.setOrigin(0,.5)},e.prototype.sortButtonsDesktop=function(t){for(var e=0;e<this._listButton.length;e++){var n=this._listButton[e];this.direction===c.VERTICAL?(n.setPosition(0,25+50*e),t.width=Math.max(n.displayWidth+15,t.width),t.height=Math.max(n.y+25,t.height)):(n.setPosition(25+50*e,0),t.width=Math.max(n.x+25,t.width),t.height=Math.max(n.displayHeight+15,t.height))}this.direction===c.VERTICAL?this.background.setOrigin(.5,0):this.background.setOrigin(0,.5)},e.prototype.sortLines=function(t){for(var e=0;e<this._listButton.length-1;e++){var n=this._listButton[e],i=this._listButton[e+1],o=this._listLines[e];void 0===o&&(o=this.scene.add.image(0,0,this._atlasMisc,"line-mode"),this.add(o),this._listLines.push(o)),this.direction===c.VERTICAL?(o.setPosition(0,(n.y+i.y)/2),o.setAngle(0),t.width=Math.max(o.width+15,t.width)):(o.setPosition((n.x+i.x)/2,0),o.setAngle(90),t.height=Math.max(o.height,t.height))}},e.prototype.onChangeSound=function(){this._playSoundClick(),this.isSoundOn=!this.isSoundOn,null!==this.sound&&(this.isSoundOn?(this.scene.sound.mute=!1,this.sound.setFrame("unmute",!0,!1)):(this.scene.sound.mute=!0,this.sound.setFrame("mute",!0,!1))),this.emit(a.SOUND,this.isSoundOn)},e.prototype.onChangeSoundMusic=function(){this._playSoundClick(),this.isSoundMusicOn=!this.isSoundMusicOn,null!==this.soundMusic&&(this.isSoundMusicOn?this.soundMusic.setFrame("unmute_music",!0,!1):this.soundMusic.setFrame("mute_music",!0,!1)),this.emit(a.MUSIC,this.isSoundMusicOn)},e}(Phaser.GameObjects.Container);e.CompoMenu=f},2804:function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.ToggleMode=e.EventToggleMode=void 0;var r,s=Phaser.GameObjects.Container,a=Phaser.Input.Events.POINTER_DOWN,c=Phaser.Input.Events.POINTER_OVER,h=Phaser.Input.Events.POINTER_OUT,u=n(6871),l=n(5080);!function(t){t.CHANGE_MODE="change-mode"}(r=e.EventToggleMode||(e.EventToggleMode={}));var p=function(t){function e(e){var n=t.call(this,e)||this;return n._atlasMisc=n.scene.textures.get("core/AtlasMisc"),n.background=n.scene.add.image(0,0,n._atlasMisc,"bg-toggle"),n.foam=n.scene.add.image(0,0,n._atlasMisc,"foam"),n.light=n.scene.add.image(0,0,n._atlasMisc,"light"),n.dark=n.scene.add.image(0,0,n._atlasMisc,"dark"),n.containerFoam=n.scene.add.container(0,0,[n.foam,n.light,n.dark]),n.tooltip=n.scene.add.text(0,0,"",{fontFamily:"Montserrat-SemiBold",fontSize:n.scene.game.device.os.desktop?"20px":10*l.DPR+"px",color:"#cc2b2b",stroke:"#fff",strokeThickness:2}),n._mode=u.MODE_STYLES.LIGHT,n.isInteractive=!0,n.background.setInteractive({useHandCursor:!0}),n.background.on(a,n.onClickBackground,n),n.background.on(c,n.onOverBackground,n),n.background.on(h,n.onOutBackground,n),n.background.setScrollFactor(0),n.foam.setScrollFactor(0),n.light.setScrollFactor(0),n.dark.setScrollFactor(0),n.width=n.background.width,n.height=n.background.height,n.dark.alpha=0,n.tooltip.setVisible(!1),n.tooltip.setOrigin(0,.5),n.tooltip.x=n.background.width/2+10,n.add([n.background,n.containerFoam,n.tooltip]),n.setLightMode(),n}return o(e,t),e.prototype.interactiveMode=function(t){this.isInteractive=t,this.background.setInteractive({useHandCursor:t}),this._setColorBackground()},e.prototype.onOverBackground=function(){this.isInteractive||(this.tooltip.setText("Mode can't be changed while round is in play"),this.tooltip.setVisible(!0))},e.prototype.onOutBackground=function(){this.isInteractive||this.tooltip.setVisible(!1)},e.prototype.onClickBackground=function(){this.isInteractive&&(this.emit(r.CHANGE_MODE),this.animatedToggle())},e.prototype.animatedToggle=function(){(this._mode===u.MODE_STYLES.LIGHT?u.MODE_STYLES.DARK:u.MODE_STYLES.LIGHT)===u.MODE_STYLES.LIGHT?this.setLightMode():this.setDarkMode()},e.prototype.setLightMode=function(){this._mode=u.MODE_STYLES.LIGHT,this._tweenAlpha(this.light,1),this._tweenAlpha(this.dark,0),this._tweenPosition(this.background.width/2-this.light.width/2-10),this._setColorBackground()},e.prototype.setDarkMode=function(){this._mode=u.MODE_STYLES.DARK,this._tweenAlpha(this.light,0),this._tweenAlpha(this.dark,1),this._tweenPosition(-this.background.width/2+this.dark.width/2+10),this._setColorBackground()},e.prototype._setColorBackground=function(){this.isInteractive?this._mode===u.MODE_STYLES.LIGHT?this.background.setTint(16777215):this.background.setTint(993091):this.background.setTint(13380395)},e.prototype._tweenPosition=function(t){this.scene.tweens.killTweensOf(this.containerFoam),this.scene.tweens.add({targets:this.containerFoam,x:t,duration:300})},e.prototype._tweenAlpha=function(t,e){this.scene.tweens.killTweensOf(t),this.scene.tweens.add({targets:t,alpha:e,duration:300})},e}(s);e.ToggleMode=p},8356:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Config=void 0,e.Config={BASE_URL:"/assets/games/",WIDTH_DESIGN:1508,HEIGHT_DESIGN:787,MAX_WIDTH_QUERY:600,MENU:{toggleMode:!0,sound:!0,music:!0}}},6285:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EVENT_CORE=void 0,function(t){t.SWITCH_SCREEN_MODE="switch-screen-mode",t.DEVICE_DESKTOP="device-desktop",t.DEVICE_MOBILE="device-mobile",t.LOAD_FILE="load",t.LOADING_PROGRESS="progress",t.LOAD_COMPLETED="load-completed",t.CONNECTED_SERVER="connected-server"}(e.EVENT_CORE||(e.EVENT_CORE={}))},7771:()=>{"use strict";var t=Phaser.GameObjects.GameObject,e=Phaser.Geom.Point;t.prototype.getGlobalPosition=function(t){return this.parentContainer?this.parentContainer.toGlobal(this.x,this.y,t):this.toGlobal(this.x,this.y,t)},t.prototype.toGlobal=function(t,n,i){void 0===i&&(i=new e(t,n));var o=this.getWorldTransformMatrix();if(o){var r=o.getX(t,n),s=o.getY(t,n);i.setTo(r,s)}return i},t.prototype.toLocal=function(t,e,n,i){var o=n.toGlobal(t,e,i),r=new Phaser.Math.Vector2(o.x,o.y),s=this.getWorldTransformMatrix();return s&&s.applyInverse(o.x,o.y,r),r},t.prototype.getParentScale=function(){for(var t=1,e=this.parentContainer;e;)t*=e.scale,e=e.parentContainer;return t},t.prototype.getGlobalScale=function(){return this.getParentScale()*this.scale}},5080:function(t,e,n){"use strict";var i,o=n(5933),r=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.AssetsLoader=e.DPR=void 0;var s=Phaser.Loader.Events.COMPLETE,a=Phaser.Loader.Events.FILE_LOAD,c=n(490),h=Phaser.Loader.Events.PROGRESS,u=n(6285);e.DPR=Math.min(Math.round(window.devicePixelRatio),2);var l=function(t){function n(e,n){var i=t.call(this,e,n,"AssetsLoader")||this;return i.fonts={},i.i18n=null,i.assets={},i.spines=[],i.loaders={},i.postfix="",i.os="",i}return r(n,t),n.prototype.start=function(t){this.fonts=t.fonts||{},this.i18n=t.i18n||null,this.spines=t.spines||[],this.assets={images:t.images||[],sprites:t.sprites||[],audio:t.audio||[],bitmapFonts:t.bitmapFonts||[],jsons:t.jsons||[],animations:t.animations||[],meshes:t.meshes||[]},this.loaders={images:this._loadImage,sprites:this._loadSprite,audio:this._loadAudio,bitmapFonts:this._loadBitmapFont,jsons:this._loadJson,animations:this._loadAnimations,meshes:this._loadObj},this.game.device.os.desktop?(e.DPR=1,this.os="desktop/"):(this.os="mobile/",this.postfix="@"+e.DPR+"x")},n.prototype.load=function(){var t=this;return this._loadSpines().then((function(){return Promise.all([t._loadAssets(),t._loadFonts(),t._loadLanguage()])})).catch((function(){return Promise.resolve([])}))},n.prototype._emitLoad=function(t){this.game.events.emit(u.EVENT_CORE.LOAD_FILE,t)},n.prototype._emitProgress=function(t){this.game.events.emit(u.EVENT_CORE.LOADING_PROGRESS,t)},n.prototype._loadAssets=function(){var t=this;return new Promise((function(e){Object.keys(t.assets).forEach((function(e){t.assets[e].forEach((function(n){var i=n.split(".");t.loaders[e].call(t,i[0],i[1])}))})),t.scene.load.on(a,t._emitLoad,t),t.scene.load.on(h,t._emitProgress,t),t.scene.load.once(s,(function(){t.scene.load.off(a,t._emitLoad,t),t.scene.load.off(h,t._emitProgress,t),t.game.events.emit(u.EVENT_CORE.LOAD_COMPLETED),e()})),t.scene.load.start()}))},n.prototype._loadFonts=function(){var t=this;return 0===Object.keys(this.fonts).length?Promise.resolve():new Promise((function(e){o.load(Object.assign({},t.fonts,{active:function(){t.systems.events.emit("load"),e()}}))}))},n.prototype._loadImage=function(t){var e=this.getInfoExtra(t),n=e.subPathOs+"images/",i="".concat(n).concat(e.fileName).concat(this.postfix,".").concat(e.extension);this.scene.load.image(t,i)},n.prototype._loadSprite=function(t){var e=this.getInfoExtra(t),n=e.subPathOs+"sprites/",i="".concat(n).concat(e.fileName).concat(this.postfix,".").concat(e.extension),o="".concat(n).concat(e.fileName).concat(this.postfix,".json");this.scene.load.atlas(t,i,o)},n.prototype._loadAudio=function(t,e){var n=this.getInfoExtra(t),i=n.subPath+"audio/",o="".concat(i).concat(n.fileName,".").concat(e);this.scene.load.audio(t,o)},n.prototype._loadBitmapFont=function(t){var e=this.getInfoExtra(t),n=e.subPathOs+"bitmap/",i="".concat(n).concat(t).concat(this.postfix,".").concat(e.extension),o="".concat(n).concat(t).concat(this.postfix,".xml");this.scene.load.bitmapFont(t,i,o)},n.prototype._loadJson=function(t,e){var n="".concat("jsons/").concat(t,".").concat(e);this.scene.load.json(t,n)},n.prototype._loadObj=function(t){var e="".concat("meshes/").concat(t,".obj");this.scene.load.obj(t,e)},n.prototype._loadAnimations=function(t){var e=this.getInfoExtra(t),n=e.subPathOs+"animations/";this.scene.load.dragonbone(t,"".concat(n).concat(e.fileName,"_tex").concat(this.postfix,".").concat(e.extension),"".concat(n).concat(e.fileName,"_tex").concat(this.postfix,".json"),"".concat(n).concat(e.fileName,"_ske").concat(this.postfix,".dbbin"),void 0,void 0,{responseType:"arraybuffer"})},n.prototype._loadSpines=function(){var t=this;return new Promise((function(e){if(0===t.spines.length)return e();var n=t.scene.load.baseURL,i=t.scene.load.path;t.scene.load.setBaseURL(""),t.scene.load.setPath(n+i),t.scene.load.on(a,t._emitLoad,t),t.scene.load.once(s,(function(){t.scene.load.setBaseURL(n),t.scene.load.setPath(i),t.scene.load.off(a,t._emitLoad,t),e()})),t.spines.forEach((function(e){var n=e,i=/\(([^)]+)\)/.exec(e);null!==i&&(n=e.substring(0,i.index));var o=t.getInfoExtra(n),r=o.subPathOs+"spines/",s=[];if(null!==i)for(var a=Number(i[1]),c=1;c<=a;c++)s.push("".concat(r).concat(o.fileName,"-").concat(c).concat(t.postfix,".atlas"));else s.push("".concat(r).concat(o.fileName).concat(t.postfix,".atlas"));t.scene.load.spine(n,"".concat(r).concat(o.fileName).concat(t.postfix,".json"),s,!0)})),t.scene.load.start()}))},n.prototype._loadLanguage=function(){if(this.i18n){var t="assets/games/".concat(this.i18n.baseUrl,"/");return this.scene.i18n.initialize({backend:{loadPath:"".concat(t,"{{lng}}/{{ns}}.json")},ns:this.i18n.ns,defaultNS:this.i18n.ns[0],lng:this.i18n.lng,fallbackLng:"en"})}return Promise.resolve()},n.prototype.getInfoExtra=function(t){var e=c.Utils.isSupportedWebP?"webp":"png";if(t.indexOf("core")>-1){var n=t.split("/");return{fileName:n[n.length-1],extension:e,subPath:"../../core/",subPathOs:"../../core/"+this.os+e+"/",subPathFormat:"../../core/"}}return{fileName:t,extension:e,subPath:"",subPathOs:this.os+e+"/",subPathFormat:""}},n}(Phaser.Plugins.ScenePlugin);e.AssetsLoader=l},6517:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SoundManager=e.SOUND_NAME=void 0;var n=Phaser.Core.Events.PAUSE,i=Phaser.Core.Events.RESUME;!function(t){t.CLICK="core/menu-click"}(e.SOUND_NAME||(e.SOUND_NAME={}));var o=function(){function t(t){this.scene=t}return t.prototype.init=function(){var t=this;this.scene.game.events.on(n,(function(){t.scene.sound.mute=!0})),this.scene.game.events.on(i,(function(){t.scene.sound.mute=!1}))},t.prototype.play=function(t,e){var n=this.getSound(t,e);return n.play(),n},t.prototype.stop=function(t){var e=this.scene.sound.get(t);null!==e&&e.stop()},t.prototype.mute=function(t,e){var n=this.scene.sound.get(t);null!==n&&n.setMute(e)},t.prototype.seek=function(t,e){var n=this.scene.sound.get(t);null!==n&&n.setSeek(e)},t.prototype.getSound=function(t,e){if(null==e?void 0:e.multiInstance){for(var n=this.scene.sound.getAll(t),i=0,o=n.length;i<o;i++)if(!n[i].isPlaying)return n[i]}else{var r=this.scene.sound.get(t);if(null!==r)return r}return this.scene.sound.add(t,e)},t}();e.SoundManager=o},2149:function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.GeneralScene=void 0;var r=n(8356),s=Phaser.Scale.Events.RESIZE,a=n(5080),c=n(6285),h=function(t){function e(e){var n=t.call(this,Phaser.Utils.Objects.Extend(!0,{loader:{baseURL:r.Config.BASE_URL}},e))||this;return n.rootContainer=null,n.gameScale=1,n.isDesktopMode=!0,n._resizeListenerBind=n.forceResize.bind(n),n._isFirstChangeMode=!1,n}return o(e,t),e.prototype.init=function(){var t=this.scale.gameSize.width,e=this.scale.gameSize.height;this.rootContainer=this.add.container();var n=this.add.zone(0,0,2,2);n.setOrigin(.5),this.rootContainer.add(n),this.zone=this.add.zone(0,0,t,e),this.zone.setOrigin(0),this.sizer=this.add.zone(0,0,t*a.DPR,e*a.DPR),this.sizer.setOrigin(0),this.isMobile||this.sizer.setSize(t,e),this.events.on(Phaser.Scenes.Events.DESTROY,this.destroy,this),this.scale.on(s,this.onResize,this),this.isMobile&&(this.scale.scaleMode=Phaser.Scale.ScaleModes.NONE,window.addEventListener("resize",this._resizeListenerBind,!1))},Object.defineProperty(e.prototype,"isMobile",{get:function(){var t=this.game.device.os;return t.android||t.iPhone||t.windowsPhone},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isAndroid",{get:function(){return this.game.device.os.android},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isIOS",{get:function(){return this.game.device.os.iOS},enumerable:!1,configurable:!0}),e.prototype.loadAssets=function(t){var e=this;this.loader.start(t),this.loader.load().then((function(){return e.initGame()}))},e.prototype.onResize=function(t,e,n,i,o){},e.prototype.destroy=function(){window.removeEventListener("resize",this._resizeListenerBind)},e.prototype.forceResize=function(){var t=a.DPR,e=Math.min(window.innerWidth,window.screen.width,this.scale.parent.clientWidth),n=Math.min(window.innerHeight,window.screen.height,this.scale.parent.clientHeight);e*=t,n*=t,null!==this.zone&&this.zone.setSize(e,n);var i=!this.isMobile;this.changeScaleRoot(e/t,n/t,i),this.changeSizer(e,n,i),this.changeStyleCanvas(e/t,n/t,i),this.scale.resize(e,n),this.raiseChangeMode(e,n,i)},e.prototype.raiseChangeMode=function(t,e,n){if(!this._isFirstChangeMode)return this._isFirstChangeMode=!0,void this._raiseChangeMode(n);n?this.isDesktopMode||this._raiseChangeMode(n):this.isDesktopMode&&this._raiseChangeMode(n)},e.prototype._raiseChangeMode=function(t){this.isDesktopMode=t,this.sys.events.emit(c.EVENT_CORE.SWITCH_SCREEN_MODE,this.isDesktopMode)},e.prototype.changeSizer=function(t,e,n){n?this.sizer.setSize(this.zone.width,this.zone.height):this.sizer.setSize(t,e)},e.prototype.changeScaleRoot=function(t,n,i){if(null!==this.rootContainer){var o=t/r.Config.WIDTH_DESIGN,s=n/r.Config.HEIGHT_DESIGN;e.rootScale=Math.min(Math.max(o,s),1),this.rootContainer.setScale(e.rootScale),this.gameScale=i?e.rootScale:1}},e.prototype.changeStyleCanvas=function(t,e,n){var i=t,o=e;this.scale.canvas.style.width=i+"px",this.scale.canvas.style.height=o+"px"},e.prototype.runOnDevice=function(){this.isMobile?this.events.emit(c.EVENT_CORE.DEVICE_MOBILE):this.events.emit(c.EVENT_CORE.DEVICE_DESKTOP)},e.rootScale=1,e}(Phaser.Scene);e.GeneralScene=h},6935:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AssetsManifest=void 0,e.AssetsManifest={images:["core/loading-logo"]}},3975:function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.LoadingScene=void 0;var r=n(2149),s=n(6935),a=n(6285),c=n(5080),h=function(t){function e(){var n=t.call(this,{key:e.SCENE_NAME})||this;return n.logo=null,n.backgroundScene=null,n.background=null,n.backgroundCircle=null,n.loadingBar=null,n.txtConnecting=null,n.maskCircle=null,n.objectTemp={current:0,end:0},n._tDrawMask=null,n._tLogo=null,n.radiusCircle=0,n.radiusProgress=0,n}return o(e,t),e.prototype.preload=function(){this.load.setPath("core/"),this.loadAssets(s.AssetsManifest)},e.prototype.initGame=function(){this.isMobile&&this.forceResize(),this.events.once(a.EVENT_CORE.DEVICE_DESKTOP,this.runOnDesktop,this),this.events.once(a.EVENT_CORE.DEVICE_MOBILE,this.runOnMobile,this),this.runOnDevice(),this.backgroundScene=this.add.graphics(),this.backgroundScene.fillStyle(993091),this.backgroundScene.fillRect(0,0,this.sizer.width,this.sizer.height),this.background=this.add.graphics(),this.background.fillStyle(1849700),this.background.fillCircle(this.sizer.width/2,this.sizer.height/2,this.radiusProgress),this.loadingBar=this.add.graphics(),this.loadingBar.fillStyle(16777215),this.loadingBar.fillCircle(0,0,this.radiusProgress),this.loadingBar.setPosition(this.sizer.width/2,this.sizer.height/2),this.maskCircle=this.make.graphics({},!1),this.maskCircle.rotation=-Math.PI/2,this.loadingBar.setMask(this.maskCircle.createGeometryMask()),this.maskCircle.setPosition(this.loadingBar.x,this.loadingBar.y),this.backgroundCircle=this.add.graphics(),this.backgroundCircle.fillStyle(993091),this.backgroundCircle.fillCircle(this.sizer.width/2,this.sizer.height/2,this.radiusCircle),this.logo=this.add.image(this.sizer.width/2,this.sizer.height/2,"core/loading-logo"),this.game.events.on(a.EVENT_CORE.LOADING_PROGRESS,this.updateProgress,this),this.game.events.on(a.EVENT_CORE.LOAD_COMPLETED,this.startNextScene,this),this.tweenRotation(),this.loadNextScene()},e.prototype.updateProgress=function(t){var e=this;null!==this._tDrawMask&&this._tDrawMask.stop(),this.objectTemp.current=this.objectTemp.end;var n=t*Math.PI*2;this._tDrawMask=this.tweens.add({targets:this.objectTemp,end:n,duration:300,onUpdate:function(){null!==e.maskCircle&&e.maskCircle.slice(0,0,e.radiusProgress,e.objectTemp.current,e.objectTemp.end).fillPath()}})},e.prototype.tweenRotation=function(){null!==this.logo&&(this._tLogo=this.tweens.add({targets:this.logo,duration:3e3,rotation:2*Math.PI,repeat:-1}))},e.prototype.loadNextScene=function(){var t=this.game.scene,e=t.getAt(1);e&&(t.start(e),t.bringToTop(this))},e.prototype.startNextScene=function(){this.destroyObjects();var t=this.sizer.width/2,e=this.sizer.height/2;null!==this.logo&&(t=this.logo.x,e=this.logo.y+this.logo.height/2+30),this.txtConnecting=this.add.text(t,e,"Connecting to server...",{fontSize:this.isMobile?16*c.DPR+"px":"24px",fontFamily:"Montserrat-SemiBold",color:"#fff",fontStyle:"italic",stroke:"#000",strokeThickness:2}),this.txtConnecting.setOrigin(.5),this.game.events.once(a.EVENT_CORE.CONNECTED_SERVER,this.onConnectedServer,this)},e.prototype.onConnectedServer=function(){null!==this._tLogo&&(this._tLogo.stop(),this._tLogo=null),null!==this.logo&&(this.logo.destroy(!0),this.logo=null),null!==this.txtConnecting&&(this.txtConnecting.destroy(!0),this.txtConnecting=null),this.destroy(),this.game.scene.stop(this),this.game.scene.remove(e.SCENE_NAME)},e.prototype.destroyObjects=function(){null!==this._tDrawMask&&(this._tDrawMask.stop(),this._tDrawMask=null),null!==this.backgroundScene&&(this.backgroundScene.destroy(!0),this.backgroundScene=null),null!==this.background&&(this.background.destroy(!0),this.background=null),null!==this.backgroundCircle&&(this.backgroundCircle.destroy(!0),this.backgroundCircle=null),null!==this.maskCircle&&(this.maskCircle.destroy(!0),this.maskCircle=null)},e.prototype.runOnDesktop=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.radiusCircle=160,this.radiusProgress=197},e.prototype.runOnMobile=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.radiusCircle=70*c.DPR,this.radiusProgress=90*c.DPR},e.SCENE_NAME="sceneLoading",e}(r.GeneralScene);e.LoadingScene=h},423:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AbsSocketController=e.EVENT_NAME=void 0,function(t){t.OPEN="SOCKET_OPEN",t.ERROR="SOCKET_ERROR",t.CLOSE="SOCKET_CLOSE"}(e.EVENT_NAME||(e.EVENT_NAME={}));var n=function(){function t(){this.listSocket=[],this.eventsObservable=new Phaser.Events.EventEmitter}return t.prototype.getSocket=function(t){if(t)for(var e=0,n=this.listSocket.length;e<n;e++){var i=this.listSocket[e];if(i.key===t)return i.socket}return null},t.prototype.addSocket=function(t,e){for(var n=0,i=this.listSocket.length;n<i;n++){var o=this.listSocket[n];if(o.key===t)return void(o.socket=e)}this.listSocket.push({key:t,socket:e})},t.prototype.removeSocket=function(t){for(var e=0,n=this.listSocket.length;e<n;e++)if(this.listSocket[e].key===t){Phaser.Utils.Array.SpliceOne(this.listSocket,e);break}},t.prototype.closeSocket=function(t){console.error("close socket "+t);var e=this.getSocket(t);if(e)try{e.close(),this.removeSocket(t)}catch(t){console.error(t)}return e},t.prototype.isConnected=function(t){return!1},t.prototype.initSocket=function(t,e){void 0===e&&(e="")},t.prototype.sendMessage=function(t,e){},t}();e.AbsSocketController=n},9323:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SocketController=e.EVENT_SOCKET_CORE=void 0;var i=n(7304),o=n(423);!function(t){t.ERROR_REQUEST="socket-error"}(e.EVENT_SOCKET_CORE||(e.EVENT_SOCKET_CORE={}));var r=function(){function t(t,e,n){this.receiveController=t,this.webSocketController=null,this.listSocket=[],e&&this.initSocket(e,n)}return t.prototype.hasSocket=function(t){for(var e=0,n=this.listSocket.length;e<n;e++){if(this.listSocket[e]===t)return!0}return!1},t.prototype.isConnected=function(t){return null!==this.webSocketController&&this.webSocketController.isConnected(t)},t.prototype.initSocket=function(t,e){void 0===e&&(e=""),this.initWebSocket(t,e),this.addSocket(t)},t.prototype.addSocket=function(t){this.hasSocket(t)||this.listSocket.push(t)},t.prototype.removeSocket=function(t){for(var e=0,n=this.listSocket.length;e<n;e++)if(this.listSocket[e]===t){Phaser.Utils.Array.SpliceOne(this.listSocket,e);break}},t.prototype.initWebSocket=function(t,e){void 0===e&&(e=""),null===this.webSocketController&&(this.webSocketController=new i.WebSocketController,this.webSocketController.eventsObservable.on(o.EVENT_NAME.OPEN,this.receiveController.onConnected,this.receiveController),this.webSocketController.eventsObservable.on(o.EVENT_NAME.CLOSE,this.receiveController.onClosed,this.receiveController),this.webSocketController.eventsObservable.on(o.EVENT_NAME.ERROR,this.receiveController.onError,this.receiveController));var n=this.webSocketController.initSocket(t,e);this.receiveController.updateSocket(n)},t.prototype.closeSocket=function(t){null!==this.webSocketController&&this.webSocketController.closeSocket(t),this.removeSocket(t)},t.prototype.closeAllSocket=function(){for(;this.listSocket.length>0;){var t=this.listSocket[0];this.closeSocket(t)}},t.prototype.sendMessage=function(t,e){null!==this.webSocketController&&this.webSocketController.sendMessage(t,e)},t}();e.SocketController=r},7304:function(t,e,n){"use strict";var i,o=n(9998),r=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.WebSocketController=void 0;var s=n(423),a=function(t){function e(){return t.call(this)||this}return r(e,t),e.prototype.initSocket=function(t,e){var n=o(t,{reconnectionDelayMax:1e4,auth:{token:"Bearer ".concat(e)}});return n.on("connect",this._onSocketOpen.bind(this)),n.on("disconnect",this._onSocketClose.bind(this)),n.on("error",this._onSocketError.bind(this)),this.addSocket(t,n),n},e.prototype.sendMessage=function(t,e){var n=this.getSocket(e);null!==n&&n.connected&&n.send(t.buffer)},e.prototype._onSocketOpen=function(){this.eventsObservable.emit(s.EVENT_NAME.OPEN)},e.prototype._onSocketClose=function(){this.eventsObservable.emit(s.EVENT_NAME.CLOSE)},e.prototype._onSocketError=function(){this.eventsObservable.emit(s.EVENT_NAME.ERROR)},e.prototype.isConnected=function(t){var e=this.getSocket(t);return null!==e&&e.connected},e}(s.AbsSocketController);e.WebSocketController=a},1221:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.UIWidget=e.VERTICAL_MODE=e.HORIZONTAL_MODE=void 0;var i,o,r=Phaser.Scale.Events.RESIZE,s=n(7101),a=n(9627),c=n(490);!function(t){t[t.NONE=0]="NONE",t[t.LEFT=1]="LEFT",t[t.CENTER=2]="CENTER",t[t.RIGHT=3]="RIGHT",t[t.STRETCH=4]="STRETCH",t[t.TEST=5]="TEST"}(i=e.HORIZONTAL_MODE||(e.HORIZONTAL_MODE={})),function(t){t[t.NONE=0]="NONE",t[t.TOP=1]="TOP",t[t.CENTER=2]="CENTER",t[t.BOTTOM=3]="BOTTOM",t[t.STRETCH=4]="STRETCH",t[t.TEST=5]="TEST"}(o=e.VERTICAL_MODE||(e.VERTICAL_MODE={}));var h=function(){function t(t,e,n,a,c,h,u){void 0===n&&(n=i.NONE),void 0===a&&(a=0),void 0===c&&(c=o.NONE),void 0===h&&(h=0),void 0===u&&(u=!0),this.object=t,this.modeMap=new Map([["LeftTop",s.ALIGN_CONST.LEFT_TOP],["LeftCenter",s.ALIGN_CONST.LEFT_CENTER],["LeftBottom",s.ALIGN_CONST.LEFT_BOTTOM],["CenterTop",s.ALIGN_CONST.TOP_CENTER],["CenterCenter",s.ALIGN_CONST.CENTER],["CenterBottom",s.ALIGN_CONST.BOTTOM_CENTER],["RightTop",s.ALIGN_CONST.RIGHT_TOP],["RightCenter",s.ALIGN_CONST.RIGHT_CENTER],["RightBottom",s.ALIGN_CONST.RIGHT_BOTTOM]]),this.target=null,this._horizontalAlignment={mode:i.NONE,left:0,right:0},this._verticalAlignment={mode:o.NONE,top:0,bottom:0},this._isGlobal=!0,this._isEnableWidget=!0,t.uiWidget=this,e&&(this.target=e),this._isGlobal=u,this._horizontalAlignment.mode=n,this._setHorizontalOffset(a),this._verticalAlignment.mode=c,this._setVerticalOffset(h),this.object.scene.scale.on(r,this.onResize,this),this.updateAlignPosition()}return t.prototype._setHorizontalOffset=function(t){Array.isArray(t)?(this._horizontalAlignment.left=t[0],this._horizontalAlignment.right=t[1]):this._horizontalAlignment.left=t},t.prototype._setVerticalOffset=function(t){Array.isArray(t)?(this._verticalAlignment.top=t[0],this._verticalAlignment.bottom=t[1]):this._verticalAlignment.top=t},t.prototype.setHorizontal=function(t,e){this._horizontalAlignment.mode=t,this._setHorizontalOffset(e),this.updateAlignPosition()},t.prototype.setVertical=function(t,e){this._verticalAlignment.mode=t,this._setVerticalOffset(e),this.updateAlignPosition()},t.prototype.setTarget=function(t){this.target=t,this.updateAlignPosition()},t.prototype.enableWidget=function(t){void 0===t&&(t=!0),this._isEnableWidget!==t&&(this._isEnableWidget=t,t?(this.object.scene.scale.on(r,this.onResize,this),this.updateAlignPosition()):this.object.scene.scale.off(r,this.onResize,this))},t.prototype.onResize=function(){this.updateAlignPosition()},t.prototype.updateAlignPosition=function(){if(this._isEnableWidget){var t=this.target||this.object.parentContainer,e=this.getFunction(this._horizontalAlignment.mode,this._verticalAlignment.mode);if(e){var n=this._horizontalAlignment.left,r=this._horizontalAlignment.right,c=this._verticalAlignment.top,h=this._verticalAlignment.bottom,u=new Phaser.Geom.Rectangle;t&&"function"==typeof t.getBounds&&t.getBounds(u),n=this.convertPercent(n,u.width),r=this.convertPercent(r,u.width),c=this.convertPercent(c,u.height),h=this.convertPercent(h,u.height);var l=0,p=0;this._horizontalAlignment.mode===i.STRETCH&&(l=u.width-(n+r),this.object instanceof RexPlugins.GameObjects.NinePatch?this.object.resize(l,this.object.height):this.object.displayWidth=l),this._verticalAlignment.mode===o.STRETCH&&(p=u.height-(c+h),this.object instanceof RexPlugins.GameObjects.NinePatch?this.object.resize(this.object.width,p):this.object.displayHeight=p),(0,s.QuickSet)(this.object,t,e,n,c,this._isGlobal)}else{n=this._horizontalAlignment.left,c=this._verticalAlignment.top;(0,a.TopLeft)(this.object,t,n,c,this._isGlobal)}}},t.prototype.getFunction=function(t,e){var n="";switch(t){case i.LEFT:case i.STRETCH:n="Left";break;case i.CENTER:n="Center";break;case i.RIGHT:n="Right"}var r="";switch(e){case o.TOP:case o.STRETCH:r="Top";break;case o.CENTER:r="Center";break;case o.BOTTOM:r="Bottom"}var s=n+r;return this.modeMap.get(s)},t.prototype.convertPercent=function(t,e){return"string"==typeof t?c.Utils.convertStringPercent(t,e):t},t}();e.UIWidget=h},6563:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(1221);Phaser.GameObjects.GameObject.prototype.addUIWidget=function(t,e,n,o,r,s){return void 0===e&&(e=i.HORIZONTAL_MODE.NONE),void 0===n&&(n=0),void 0===o&&(o=i.VERTICAL_MODE.NONE),void 0===r&&(r=0),void 0===s&&(s=!0),new i.UIWidget(this,t,e,n,o,r,s)}},9834:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GetBounds=e.GetCenterY=e.GetCenterX=e.GetBottom=e.GetTop=e.GetRight=e.GetLeft=e.SetCenterY=e.SetCenterX=e.SetCenter=e.SetBottom=e.SetTop=e.SetRight=e.SetLeft=void 0;var n=Phaser.Geom.Rectangle,i=Phaser.GameObjects.Container,o=new n(0,0,0,0);function r(t,e){var n=a(t),i=c(t),o=u(t);return t.x=(e+n.width*(i-.5))/o,t}function s(t,e){var n=a(t),i=h(t),o=u(t);return t.y=(e+n.height*(i-.5))/o,t}function a(t,e){if(void 0===e&&(e=!0),"function"==typeof t.getBounds)t.getBounds(o);else{var n=u(t);o.setTo(0,0,t.width*n,t.height*n)}if(!e){var i=c(t),r=h(t);o.x=t.x-o.width*(1-i),o.y=t.y-o.height*(1-r)}return o}function c(t){var e=t.originX;if(t instanceof i){var n=t.getAt(0);n&&(e=n.originX)}return e}function h(t){var e=t.originY;if(t instanceof i){var n=t.getAt(0);n&&(e=n.originY)}return e}function u(t){return null===t.parentContainer?1:t.getGlobalScale()}e.SetLeft=function(t,e){var n=a(t),i=c(t),o=u(t);return t.x=(e+n.width*i)/o,t},e.SetRight=function(t,e){var n=a(t),i=c(t),o=u(t);return t.x=(e-n.width*(1-i))/o,t},e.SetTop=function(t,e){var n=a(t),i=h(t),o=u(t);return t.y=(e+n.height*i)/o,t},e.SetBottom=function(t,e){var n=a(t),i=h(t),o=u(t);return t.y=(e-n.height*(1-i))/o,t},e.SetCenter=function(t,e,n){return r(t,e),s(t,n),t},e.SetCenterX=r,e.SetCenterY=s,e.GetLeft=function(t,e){return a(t,e).left},e.GetRight=function(t,e){return a(t,e).right},e.GetTop=function(t,e){return a(t,e).top},e.GetBottom=function(t,e){return a(t,e).bottom},e.GetCenterX=function(t,e){return a(t,e).centerX},e.GetCenterY=function(t,e){return a(t,e).centerY},e.GetBounds=a},7101:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.QuickSet=e.ALIGN_CONST=void 0;var i,o=n(9627);!function(t){t[t.TOP_LEFT=0]="TOP_LEFT",t[t.TOP_CENTER=1]="TOP_CENTER",t[t.TOP_RIGHT=2]="TOP_RIGHT",t[t.LEFT_TOP=3]="LEFT_TOP",t[t.LEFT_CENTER=4]="LEFT_CENTER",t[t.LEFT_BOTTOM=5]="LEFT_BOTTOM",t[t.CENTER=6]="CENTER",t[t.RIGHT_TOP=7]="RIGHT_TOP",t[t.RIGHT_CENTER=8]="RIGHT_CENTER",t[t.RIGHT_BOTTOM=9]="RIGHT_BOTTOM",t[t.BOTTOM_LEFT=10]="BOTTOM_LEFT",t[t.BOTTOM_CENTER=11]="BOTTOM_CENTER",t[t.BOTTOM_RIGHT=12]="BOTTOM_RIGHT"}(i=e.ALIGN_CONST||(e.ALIGN_CONST={}));var r=[];r[i.BOTTOM_CENTER]=o.BottomCenter,r[i.BOTTOM_LEFT]=o.BottomLeft,r[i.BOTTOM_RIGHT]=o.BottomRight,r[i.CENTER]=o.Center,r[i.LEFT_CENTER]=o.LeftCenter,r[i.RIGHT_CENTER]=o.RightCenter,r[i.TOP_CENTER]=o.TopCenter,r[i.TOP_LEFT]=o.TopLeft,r[i.TOP_RIGHT]=o.TopRight,r[i.LEFT_BOTTOM]=r[i.BOTTOM_LEFT],r[i.LEFT_TOP]=r[i.TOP_LEFT],r[i.RIGHT_BOTTOM]=r[i.BOTTOM_RIGHT],r[i.RIGHT_TOP]=r[i.TOP_RIGHT],e.QuickSet=function(t,e,n,i,o,s){return r[n](t,e,i,o,s)}},9627:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TopRight=e.TopLeft=e.TopCenter=e.RightCenter=e.LeftCenter=e.Center=e.BottomRight=e.BottomCenter=e.BottomLeft=void 0;var i=n(9834);e.BottomLeft=function(t,e,n,o,r){return void 0===n&&(n=0),void 0===o&&(o=0),void 0===r&&(r=!0),(0,i.SetLeft)(t,(0,i.GetLeft)(e,r)+n),(0,i.SetBottom)(t,(0,i.GetBottom)(e,r)-o),t},e.BottomCenter=function(t,e,n,o,r){return void 0===n&&(n=0),void 0===o&&(o=0),void 0===r&&(r=!0),(0,i.SetCenterX)(t,(0,i.GetCenterX)(e,r)+n),(0,i.SetBottom)(t,(0,i.GetBottom)(e,r)-o),t},e.BottomRight=function(t,e,n,o,r){return void 0===n&&(n=0),void 0===o&&(o=0),void 0===r&&(r=!0),(0,i.SetRight)(t,(0,i.GetRight)(e,r)-n),(0,i.SetBottom)(t,(0,i.GetBottom)(e,r)-o),t},e.Center=function(t,e,n,o,r){return void 0===n&&(n=0),void 0===o&&(o=0),void 0===r&&(r=!0),(0,i.SetCenter)(t,(0,i.GetCenterX)(e,r)+n,(0,i.GetCenterY)(e,r)+o),t},e.LeftCenter=function(t,e,n,o,r){return void 0===n&&(n=0),void 0===o&&(o=0),void 0===r&&(r=!0),(0,i.SetLeft)(t,(0,i.GetLeft)(e,r)+n),(0,i.SetCenterY)(t,(0,i.GetCenterY)(e,r)+o),t},e.RightCenter=function(t,e,n,o,r){return void 0===n&&(n=0),void 0===o&&(o=0),void 0===r&&(r=!0),(0,i.SetRight)(t,(0,i.GetRight)(e,r)-n),(0,i.SetCenterY)(t,(0,i.GetCenterY)(e,r)+o),t},e.TopCenter=function(t,e,n,o,r){return void 0===n&&(n=0),void 0===o&&(o=0),void 0===r&&(r=!0),(0,i.SetCenterX)(t,(0,i.GetCenterX)(e,r)+n),(0,i.SetTop)(t,(0,i.GetTop)(e,r)+o),t},e.TopLeft=function(t,e,n,o,r){return void 0===n&&(n=0),void 0===o&&(o=0),void 0===r&&(r=!0),(0,i.SetLeft)(t,(0,i.GetLeft)(e,r)+n),(0,i.SetTop)(t,(0,i.GetTop)(e,r)+o),t},e.TopRight=function(t,e,n,o,r){return void 0===n&&(n=0),void 0===o&&(o=0),void 0===r&&(r=!0),(0,i.SetRight)(t,(0,i.GetRight)(e,r)-n),(0,i.SetTop)(t,(0,i.GetTop)(e,r)+o),t}},5246:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.StringUtils=void 0;var n=function(){function t(){}return t._getIndex=function(t,e,n){return void 0===n&&(n=!0),n?t.lastIndexOf(e):t.indexOf(e)},t.getStringBefore=function(e,n,i){void 0===i&&(i=!0),i=void 0===i;var o=t._getIndex(e,n,i);return e.substring(0,o)},t.removeAndReplace=function(t,e,n){return void 0===n&&(n="..."),t.length<e?t:t.slice(0,e-n.length)+n},t}();e.StringUtils=n},490:function(t,e){"use strict";var n=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(o,r){function s(t){try{c(i.next(t))}catch(t){r(t)}}function a(t){try{c(i.throw(t))}catch(t){r(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((i=i.apply(t,e||[])).next())}))},i=this&&this.__generator||function(t,e){var n,i,o,r,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,i=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==r[0]&&2!==r[0])){s=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){s.label=r[1];break}if(6===r[0]&&s.label<o[1]){s.label=o[1],o=r;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(r);break}o[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(t){r=[6,t],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.Utils=void 0;var o=function(){function t(){}return t.dispatchCustomEvent=function(t,e){window.dispatchEvent(new CustomEvent(t,e))},t.convertStringPercent=function(t,e){return parseInt(t.replace("%",""))/100*e},t.randomColor=function(){return Number("0x"+Math.floor(16777215*Math.random()).toString(16))},t.checkSupportedWebP=function(){return n(this,void 0,void 0,(function(){var e,n;return i(this,(function(i){switch(i.label){case 0:if(!window.createImageBitmap)return t.isSupportedWebP=!1,[2];e="data:image/webp;base64,UklGRiQAAABXRUJQVlA4IBgAAAAwAQCdASoCAAEAAQAcJaQAA3AA/v3AgAA=",i.label=1;case 1:return i.trys.push([1,5,,6]),[4,fetch(e)];case 2:return[4,i.sent().blob()];case 3:return n=i.sent(),[4,createImageBitmap(n)];case 4:return i.sent(),t.isSupportedWebP=!0,[3,6];case 5:return i.sent(),t.isSupportedWebP=!1,[3,6];case 6:return[2]}}))}))},t.isSupportedWebP=!0,t}();e.Utils=o},5314:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AssetsManifest=void 0;var i=n(3484);e.AssetsManifest={images:["background_dark","parallax-1","parallax-2","parallax-3","parallax-4"],sprites:["AtlasCrashMisc","AtlasCrashMeteorExplode","core/AtlasMisc","core/AtlasNinePatch"],fonts:{custom:{families:["Montserrat-Bold","Montserrat-SemiBold"],urls:[i.Config.BASE_URL+i.Config.PATH_ASSETS+"fonts/fonts.css"]}},bitmapFonts:["multiplier-black","multiplier-green","multiplier-red","multiplier-white"],animations:["char"],audio:["background-1.mp3","background-2.mp3","background-3.mp3","bg-dark-mode.mp3","cashed-out.mp3","roller.mp3","windy.mp3"]}},3777:function(t,e,n){"use strict";var i=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(o,r){function s(t){try{c(i.next(t))}catch(t){r(t)}}function a(t){try{c(i.throw(t))}catch(t){r(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((i=i.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var n,i,o,r,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,i=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==r[0]&&2!==r[0])){s=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){s.label=r[1];break}if(6===r[0]&&s.label<o[1]){s.label=o[1],o=r;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(r);break}o[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(t){r=[6,t],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}};Object.defineProperty(e,"__esModule",{value:!0});var r=n(3505),s=n(2402),a=n(3975),c=n(3243);window.addEventListener("initCrash",(function(t){return i(void 0,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return c.GameData.walletId=t.detail,[4,(0,r.initGame)({title:"CRASH 1.0",scene:[a.LoadingScene,s.SceneCrash],render:{roundPixels:!1}})];case 1:return e.sent(),[2]}}))}))}))},9672:function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.CompoGraph=void 0;var r=n(3484),s=n(8178),a=n(8873),c=n(3354),h=n(3243),u=n(2856),l=n(2293),p=n(1221),d=n(6871),f=function(t){function e(e){var n=t.call(this,e)||this;n.sceneCrash=e,n.multiply=null,n.group=null,n.compoStatistical=null,n.snowTheme=null,n.universalTheme=null,n._themeStyle=r.Config.DEFAULT_THEME,n._tweenCountDown=null,n._hasCrashedGame=!1;var i=n.scene.add.zone(0,0,1,1);return i.setOrigin(0),n.add(i),n.multiply=new l.MultiplierText(n.sceneCrash),n.add(n.multiply),n.group=n.scene.add.group({classType:c.ItemUserCashedOut}),n.compoStatistical=new u.CompoStatistical(n.sceneCrash),n.add(n.compoStatistical),n}return o(e,t),e.prototype.drawGraph=function(t,e){null!==this.universalTheme&&this.universalTheme.drawGraph(t,e),null!==this.snowTheme&&this.snowTheme.drawGraph(t,e)},e.prototype.setCountdown=function(t){var e=this;if(null!==this.multiply){t=Math.round(t),this.multiply.setTextCountdown(t/1e3-1);var n=Math.floor(t/1e3);this._tweenCountDown=this.scene.tweens.addCounter({duration:1e3,repeat:n,onRepeat:function(n,i,o){t-=1e3;var r=Math.max(0,t/1e3-1);e.multiply&&e.multiply.setTextCountdown(r)}})}},e.prototype.growthFunc=function(t){return Math.floor(100*Math.pow(Math.E,6e-5*t))},e.prototype.inverseGrowth=function(t){return 16666.666667*Math.log(.01*t)},e.prototype.changeTheme=function(t){this._themeStyle=t,this.setColorMultiply(),null===this.snowTheme&&(this.snowTheme=new s.SnowTheme(this.sceneCrash),this.add(this.snowTheme),this.sendToBack(this.snowTheme)),null===this.universalTheme&&(this.universalTheme=new a.UniversalTheme(this.sceneCrash,this),this.add(this.universalTheme),this.sendToBack(this.universalTheme)),t===d.MODE_STYLES.LIGHT?(this.snowTheme.alpha=1,null!==this.universalTheme&&(this.universalTheme.alpha=0)):this.universalTheme.alpha=1,null!==this.snowTheme&&this.snowTheme.onChangeTheme(t),null!==this.universalTheme&&this.universalTheme.onChangeTheme(t)},e.prototype.setColorMultiply=function(){if(!this._hasCrashedGame){var t=this._themeStyle===d.MODE_STYLES.LIGHT?l.EColor.BLACK:l.EColor.WHITE;null!==this.multiply&&this.multiply.setColorText(t)}},e.prototype.onJoined=function(){if(h.GameData.state!==h.STATE_GAME.ENDED){var t=500;if(h.GameData.state===h.STATE_GAME.STARTING){var e=Phaser.Math.Percent(h.GameData.elapsed,-1e4,0);t=Math.max(500,(1-e)*r.Config.TimeoutStart),this.setCountdown(t)}null!==this.snowTheme&&this.snowTheme.onJoined(t),null!==this.universalTheme&&this.universalTheme.onJoined(t)}null!==this.compoStatistical&&this.compoStatistical.addMultipleStatistical(h.GameData.history)},e.prototype.prepareStartGame=function(t){this.setCountdown(t),null!==this.snowTheme&&this.snowTheme.prepareStartGame(t),null!==this.universalTheme&&this.universalTheme.prepareStartGame(t)},e.prototype.startedGame=function(){null!==this._tweenCountDown&&this._tweenCountDown.remove(),null!==this.universalTheme&&this.universalTheme.startedGame(),null!==this.snowTheme&&this.snowTheme.startedGame()},e.prototype.updateElapsed=function(t){var e=this.growthFunc(t);this.updateCrashRatio(e),this.drawGraph(t,e/100)},e.prototype.updateCrashRatio=function(t){null!==this.multiply&&this.multiply.setTextRatio(t)},e.prototype.crashGame=function(t){this._hasCrashedGame=!0,this.updateCrashRatio(t),this.multiply.setColorText(l.EColor.RED),null!==this.universalTheme&&this.universalTheme.crashGame(),null!==this.snowTheme&&this.snowTheme.crashGame(),null!==this.compoStatistical&&this.compoStatistical.addStatistical(t/100)},e.prototype.userCashedOut=function(t,e){var n=this;if(this.scene.sound.play("cashed-out"),t===h.GameData.userName&&(null!==this.multiply&&this.multiply.setColorText(l.EColor.GREEN),null!==this.snowTheme&&this.snowTheme.mimeCashedOut()),null!==this.group){var i=new Phaser.Math.Vector2;i=this._themeStyle===d.MODE_STYLES.DARK?this.universalTheme.getPositionCashOut():this.snowTheme.getPositionCashOut();var o=this.group.get();o.setPosition(i.x,i.y),o.updateUserName(t),o.fadeOut((function(t){n.group.killAndHide(t)})),this.add(o),this.bringToTop(o)}},e.prototype.clearGraph=function(){this._hasCrashedGame=!1,null!==this.universalTheme&&this.universalTheme.clearGraph(),null!==this.snowTheme&&this.snowTheme.clearGraph(),null!==this.multiply&&this.setColorMultiply()},e.prototype.runOnDesktop=function(){null!==this.multiply&&(Phaser.Display.Align.In.TopCenter(this.multiply,this.sceneCrash.sizer,0,-200),this.multiply.runOnDesktop()),null!==this.compoStatistical&&this.compoStatistical.runOnDesktop()},e.prototype.runOnMobile=function(){null!==this.multiply&&(this.multiply.addUIWidget(this.sceneCrash.sizer,p.HORIZONTAL_MODE.CENTER,0,p.VERTICAL_MODE.TOP,"25%"),this.multiply.runOnMobile()),null!==this.compoStatistical&&this.compoStatistical.runOnMobile()},e}(Phaser.GameObjects.Container);e.CompoGraph=f},3354:function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.ItemUserCashedOut=void 0;var r=n(5246),s=n(5080),a=function(t){function e(e){var n=t.call(this,e)||this;return n.bg=null,n.txtUserName=null,n._txtStyle={color:"#0F2743",fontSize:15*s.DPR+"px",fontFamily:"Montserrat-Bold",fontStyle:"bold"},n.bg=n.scene.add.image(0,0,"AtlasCrashMisc","bg_user_cashed_out"),n.bg.setScale(e.gameScale),n.add(n.bg),n.txtUserName=n.scene.add.text(0,0,"",n._txtStyle),n.txtUserName.setFontSize(15*s.DPR*e.gameScale),n.txtUserName.setOrigin(.5),n.add(n.txtUserName),n}return o(e,t),e.prototype.updateUserName=function(t){null!==this.txtUserName&&(this.txtUserName.setText(r.StringUtils.removeAndReplace(t,10)),this.txtUserName.setStyle(this._txtStyle))},e.prototype.fadeOut=function(t){var e=this;this.setVisible(!0),this.setActive(!0),this.alpha=1,this.scene.tweens.add({targets:this,y:"+=100",alpha:0,duration:3e3,ease:Phaser.Math.Easing.Quadratic.Out,onComplete:function(){t(e)}})},e}(Phaser.GameObjects.Container);e.ItemUserCashedOut=a},2293:function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.MultiplierText=e.EColor=void 0;var r,s=n(5080);!function(t){t[t.BLACK=0]="BLACK",t[t.GREEN=1]="GREEN",t[t.RED=2]="RED",t[t.WHITE=3]="WHITE"}(r=e.EColor||(e.EColor={}));var a=function(t){function e(e){var n=t.call(this,e)||this;n.sceneCrash=e,n.txt1=n.scene.add.bitmapText(-31,0,"multiplier-black","",50*s.DPR*n.sceneCrash.gameScale),n.txt2=n.scene.add.bitmapText(-26,0,"multiplier-black",".",50*s.DPR*n.sceneCrash.gameScale),n.txt3=n.scene.add.bitmapText(-18,0,"multiplier-black","",50*s.DPR*n.sceneCrash.gameScale),n.txt4=n.scene.add.bitmapText(64,0,"multiplier-black","x",50*s.DPR*n.sceneCrash.gameScale),n.setScrollFactor(0),n.txt1.setOrigin(1,1),n.txt2.setOrigin(.5,1),n.txt3.setOrigin(0,1),n.txt4.setOrigin(.5,1),n.txt1.setVisible(!1),n.txt2.setVisible(!1),n.txt3.setVisible(!1),n.txt4.setVisible(!1);var i=n.scene.add.zone(0,1,1,1);return i.setOrigin(.5,1),n.add([i,n.txt1,n.txt2,n.txt3,n.txt4]),n}return o(e,t),e.prototype.setColorText=function(t){var e="";switch(t){case r.BLACK:e="multiplier-black";break;case r.GREEN:e="multiplier-green";break;case r.RED:e="multiplier-red";break;case r.WHITE:e="multiplier-white"}this.txt1.setFont(e),this.txt2.setFont(e),this.txt3.setFont(e),this.txt4.setFont(e)},e.prototype.setTextCountdown=function(t){this.txt1.setVisible(!1),this.txt2.setVisible(!1),this.txt3.setText(Math.round(t)+""),this.txt3.setVisible(!0),this.txt4.setVisible(!1)},e.prototype.setTextRatio=function(t){var e=(t/100).toFixed(2).split(".");this.txt1.setText(e[0]),this.txt3.setText(e[1]),this.txt1.setVisible(!0),this.txt2.setVisible(!0),this.txt3.setVisible(!0),this.txt4.setVisible(!0)},e.prototype.runOnDesktop=function(){this.txt1.setFontSize(55),this.txt2.setFontSize(55),this.txt3.setFontSize(55),this.txt4.setFontSize(55),this.txt1.x=-31,this.txt2.x=-26,this.txt3.x=-18,this.txt4.x=70},e.prototype.runOnMobile=function(){var t=28*s.DPR;this.txt1.setFontSize(t),this.txt2.setFontSize(t),this.txt3.setFontSize(t),this.txt4.setFontSize(t),this.txt1.x=-23*s.DPR,this.txt2.x=-18*s.DPR,this.txt3.x=-14*s.DPR,this.txt4.x=35*s.DPR},e}(Phaser.GameObjects.Container);e.MultiplierText=a},5179:function(t,e){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0}),e.Line=void 0;var o=function(t){function e(e,n,i,o,r,s,a,c,h,u){var l=t.call(this,e,n,i,o,r,s,a,c,h,u)||this;return l._tween1=null,l._tweenN=null,l._timeScale=1,l}return i(e,t),e.prototype.appear=function(t){this.copyPosition(t)},e.prototype.tweenLoop=function(t,e,n,i){var o=this;if(this.visible){if(null===this._tween1){var r=Phaser.Math.Distance.Between(this.x,this.y,n,i)/100*1e3;this._tween1=this.scene.tweens.add({targets:this,x:n,y:i,duration:r,onComplete:function(){o.x=t,o.y=e,o.loopN(n,i)}})}else this._tween1.restart();this._tween1.setTimeScale(this._timeScale)}},e.prototype.loopN=function(t,e){if(null===this._tweenN){var n=Phaser.Math.Distance.Between(this.x,this.y,t,e)/100*1e3;this._tweenN=this.scene.tweens.add({targets:this,x:t,y:e,duration:n,repeat:-1})}else this._tweenN.restart();this._tweenN.setTimeScale(this._timeScale)},e.prototype.stopTween=function(){this._timeScale=1,null!==this._tween1&&this._tween1.remove(),null!==this._tweenN&&this._tweenN.remove()},e.prototype.updateSpeed=function(t,e){this._timeScale=Phaser.Math.Clamp(8*e,1,8),null!==this._tween1&&this._tween1.setTimeScale(this._timeScale),null!==this._tweenN&&this._tweenN.setTimeScale(this._timeScale)},e}(RexPlugins.GameObjects.NinePatch);e.Line=o},8537:function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.SnowBackground=void 0;var r=Phaser.GameObjects.Container,s=n(5080),a=function(t){function e(e){var n=t.call(this,e)||this;return n.sceneCrash=e,n.background0=null,n.background1=null,n.background2=null,n.background3=null,n.background4=null,n.background5=null,n.particleSnow=null,n._tween=null,n._percentSpeed=0,null!==n.sceneCrash.sizer&&(n.background0=n._createBg("AtlasCrashMisc",1,"frame_sky"),n.background0.height=n.sceneCrash.sizer.height,n.background0.y=-n.background0.height+50*s.DPR*n.sceneCrash.gameScale,n.background3=n._createBg("parallax-3",.3),n.background2=n._createBg("parallax-2",.5),n.background2.y=n.sceneCrash.isMobile?(n.sceneCrash.sizer.height-n.background2.displayHeight)/2:n.sceneCrash.sizer.height-n.background2.displayHeight,n.background1=n._createBg("parallax-1",.7),n.background1.y=n.sceneCrash.sizer.height-n.background1.displayHeight,n.background4=n._createBg("parallax-4",.1),n.background5=n._createBg("parallax-4",.1),n.background5.y=-n.background5.height,n.particleSnow=n.scene.add.particles("AtlasCrashMisc","part-snow",{x:{min:0,max:2*n.sceneCrash.sizer.width},y:-10*s.DPR,angle:{min:0,max:360},speedX:{min:-40*s.DPR,max:40*s.DPR},speedY:{min:2*s.DPR,max:20*s.DPR},gravityY:n.sceneCrash.sizer.height/5,lifespan:{min:1e3,max:4e3},scale:{min:.2*n.sceneCrash.gameScale,max:n.sceneCrash.gameScale},tint:16777215,blendMode:Phaser.BlendModes.ADD}),n.add(n.particleSnow)),n}return o(e,t),e.prototype._createBg=function(t,e,n){var i=this.scene.add.tileSprite(0,0,0,0,t,n);return i.setOrigin(0,0),i.setScrollFactor(e,1),i.tileScaleX=this.sceneCrash.gameScale,i.tileScaleY=this.sceneCrash.gameScale,i.width=3*this.sceneCrash.sizer.width,i.height*=this.sceneCrash.gameScale,this.add(i),i},e.prototype.parallaxScrolling=function(){var t=this;null===this._tween?this._tween=this.scene.tweens.addCounter({duration:1e3,onUpdate:function(){null!==t.background1&&(t.background1.tilePositionX+=Phaser.Math.Clamp(t._percentSpeed*e.MAX_1,1,e.MAX_1)),null!==t.background2&&(t.background2.tilePositionX+=Phaser.Math.Clamp(t._percentSpeed*e.MAX_2,.7,e.MAX_2)),null!==t.background3&&(t.background3.tilePositionX+=Phaser.Math.Clamp(t._percentSpeed*e.MAX_3,.5,e.MAX_3)),null!==t.background4&&(t.background4.tilePositionX+=Phaser.Math.Clamp(t._percentSpeed*e.MAX_4,.2,e.MAX_4))},repeat:-1}):this._tween.restart()},e.prototype.stopParallaxScrolling=function(){null!==this._tween&&this._tween.stop()},e.prototype.resetParallax=function(){this.stopParallaxScrolling(),null!==this.background1&&(this.background1.tilePositionX=0,this.background1.tilePositionY=0),null!==this.background2&&(this.background2.tilePositionX=0,this.background2.tilePositionY=0),null!==this.background3&&(this.background3.tilePositionX=0,this.background3.tilePositionY=0),null!==this.background4&&(this.background4.tilePositionX=0,this.background4.tilePositionY=0)},e.prototype.updateSpeed=function(t,e){this._percentSpeed=e},e.MAX_1=20,e.MAX_2=15,e.MAX_3=10,e.MAX_4=5,e}(r);e.SnowBackground=a},8178:function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.SnowTheme=e.EStatusDriver=void 0;var r,s=n(3484),a=n(5179),c=n(8537),h=n(5791),u=n(6871),l=n(5080),p=n(3243),d=Phaser.Physics.Arcade.Events.WORLD_BOUNDS,f=Phaser.Math.Vector2;!function(t){t[t.RUN=0]="RUN",t[t.WIN=1]="WIN",t[t.LOSE=2]="LOSE"}(r=e.EStatusDriver||(e.EStatusDriver={}));var v=function(t){function e(n){var i,o,a=t.call(this,n)||this;return a.sceneCrash=n,a.snowBackground=null,a.soundEffect=new h.SoundEffect(a.sceneCrash),a.theme=s.Config.DEFAULT_THEME,a.driver=null,a.listDriver={},a.driverBounds=new Phaser.Geom.Rectangle,a.speed=e.MIN_SPEED,a.startedSpeedUp=!1,a.isMeCashedOut=!1,a.isPrepared=!1,a._milestonesDeltaWidthLine=150,a._listLine=[],a._markAsCompleted=!1,a._beforeCompleted=!1,a._hasCrashedGame=!1,a._boundingWidth=a.scene.scale.gameSize.width+15,a._boundingHeight=a.scene.scale.gameSize.height-30,a.graphicLine=null,a.curveLine=null,a._tempVec0=new Phaser.Math.Vector2,a._tempVec1=new Phaser.Math.Vector2,a._milestonesDeltaWidthLine=a.sceneCrash.isMobile?50*l.DPR:105*l.DPR*a.sceneCrash.gameScale,a.snowBackground=new c.SnowBackground(a.sceneCrash),a.snowBackground.setDepth(-1),a.add(a.snowBackground),a.updateStatusDriver(r.RUN),null!==a.driver&&(a.driver.getBounds(a.driverBounds),a.driver.setPosition(-9999,9999),a.add(a.driver)),a.curveLine=new Phaser.Curves.Line(new f(0,a._boundingHeight),new f(a._boundingWidth,0)),a.sceneCrash.isMobile?(i=[11*l.DPR,void 0,11*l.DPR],o=[6*l.DPR,void 0,6*l.DPR]):(i=[18*l.DPR,void 0,18*l.DPR],o=[10*l.DPR,void 0,10*l.DPR]),a.graphicLine=a.scene.add.rexNinePatch(0,0,10,10,"AtlasCrashMisc","line-bridge",i,o),a.graphicLine.setTintFill(16141131),a.graphicLine.setOrigin(0,.5),a.add(a.graphicLine),a.onResize(),a}return o(e,t),e.prototype.resetCurveLine=function(){var t,e;if(this.sceneCrash.isMobile?(t=50,e=20):(t=180,e=35),this._boundingWidth=this.sceneCrash.sizer.width+t*l.DPR*this.sceneCrash.gameScale,this._boundingHeight=this.sceneCrash.sizer.height+e*l.DPR*this.sceneCrash.gameScale,this.curveLine){this.curveLine.p0.set(0,this._boundingHeight),this.curveLine.p1.set(this._boundingWidth,0),this.curveLine.getPoint(0,this._tempVec0),this.curveLine.getPoint(1,this._tempVec1);var n=Phaser.Math.Angle.BetweenPoints(this._tempVec0,this._tempVec1);if(this.curveLine.updateArcLengths(),null!==this.graphicLine){var i=this.sceneCrash.isMobile?15*l.DPR:15*this.sceneCrash.gameScale*l.DPR;this.graphicLine.copyPosition(this._tempVec0.clone()),this.graphicLine.resize(this.curveLine.getLength(),i),this.graphicLine.setRotation(n)}}},e.prototype.resetLine=function(){if(null!==this.curveLine&&null!==this.snowBackground){this.curveLine.needsUpdate=!0;for(var t=this.curveLine.getDistancePoints(this._milestonesDeltaWidthLine),e=0,n=t.length;e<n;e++){var i=t[e],o=this._listLine[e];void 0===o?o=this._createLine():o.stopTween(),o.resize(o.width,this.sceneCrash.sizer.height/this.sceneCrash.gameScale),o.appear(i),o.setVisible(!0)}for(var r=n;r<this._listLine.length;r++)this._listLine[r].setVisible(!1)}},e.prototype.resizeLine=function(){this.resetLine(),this.tweenLine()},e.prototype._createLine=function(){var t,e,n,i=1;null!==this.snowBackground&&(i=this.getIndex(this.snowBackground)+1),this.sceneCrash.isMobile?(t=[1*l.DPR,void 0,1*l.DPR],e=[10*l.DPR,void 0,10*l.DPR],n=5*l.DPR):(t=[5*l.DPR,void 0,5*l.DPR],e=[10*l.DPR,void 0,10*l.DPR],n=9*this.sceneCrash.gameScale*l.DPR);var o=new a.Line(this.scene,0,0,n,this.sceneCrash.sizer.height/this.sceneCrash.gameScale*l.DPR,"AtlasCrashMisc","line",t,e);return o.setOrigin(0),this.addAt(o,i),this._listLine.push(o),o},e.prototype.resetDriver=function(){if(null!==this.curveLine&&null!==this.driver){this.curveLine.getPoint(.01,this._tempVec0),this.driver.setPosition(this._tempVec0.x,this._tempVec0.y),this.curveLine.getPoint(.1,this._tempVec0);var t=Phaser.Math.Angle.Between(this.driver.x,this.driver.y,this._tempVec0.x,this._tempVec0.y);this.driver.setRotation(t)}},e.prototype.resizeDriver=function(){if(null!==this.curveLine&&null!==this.driver&&this.isPrepared){var t=this.sceneCrash.isMobile?.5:.48;this.curveLine.getPoint(t,this._tempVec0),this.driver.copyPosition(this._tempVec0),this.curveLine.getPoint(t+.01,this._tempVec0);var e=Phaser.Math.Angle.Between(this.driver.x,this.driver.y,this._tempVec0.x,this._tempVec0.y);this.driver.setRotation(e)}},e.prototype.tweenLine=function(){if(this.isPrepared&&null!==this.curveLine){this.curveLine.getPoint(0,this._tempVec0);for(var t=this.curveLine.getLength(),e=Math.max(1,t/this._milestonesDeltaWidthLine),n=this.curveLine.getUtoTmapping((Math.floor(e)+1)/e,0,e),i=this.curveLine.getPoint(n),o=0,r=this._listLine.length;o<r;o++){this._listLine[o].tweenLoop(i.x,i.y,this._tempVec0.x,this._tempVec0.y)}}},e.prototype.onChangeTheme=function(t){this.theme=t,this.sceneCrash.muteBgSoundLight(t===u.MODE_STYLES.DARK),t===u.MODE_STYLES.LIGHT?(this.alpha=1,this.soundEffect.isThemeSnow=!0,this.startFollow()):(this.alpha=0,this.soundEffect.isThemeSnow=!1,this.stopFollow())},e.prototype.getDriver=function(){return this.driver},e.prototype.onJoined=function(t){var e=this;p.GameData.state===p.STATE_GAME.IN_PROGRESS&&this.once("prepareStartGameCompleted",(function(){var t=p.GameData.playerInfo,n=Phaser.Utils.Objects.GetValue(t,p.GameData.userName,null);if(null!==n){var i=n.stopped_at;i&&e.sceneCrash.messageCashedOut(p.GameData.userName,i)}})),this.prepareStartGame(t)},e.prototype.startedGame=function(){},e.prototype.updateSpeed=function(t){var n=this;this.speed=Phaser.Math.Clamp(t,e.MIN_SPEED,e.MAX_SPEED);var i=Phaser.Math.Percent(this.speed,e.MIN_SPEED,e.MAX_SPEED);if(null!==this.snowBackground&&this.snowBackground.updateSpeed(this.speed,i),null!==this.driver)if(t>=e.SPEED_UP_RATIO)this.startedSpeedUp||(this.startedSpeedUp=!0,this.soundEffect.playWindy(),this.driver.animation.play("run-pre-fast",1),this.driver.once(dragonBones.EventObject.COMPLETE,(function(){if(null!==n.driver){var t=n.driver.animation.play("run-fast",0);null!==t&&(t.timeScale=2)}})));else{var o=this.driver.animation.getState("run");null!==o&&(o.timeScale=Phaser.Math.Clamp(3*i,1,3))}for(var r=0,s=this._listLine.length;r<s;r++){this._listLine[r].updateSpeed(this.speed,i)}},e.prototype.prepareStartGame=function(t){var e=this;if(this.setDeadZoneCamera(),this.stopFollow(),null!==this.curveLine&&null!==this.driver){this.soundEffect.playRoller(),this.resetLine(),this.resetDriver();var n=this.sceneCrash.isMobile?.5:.48,i=new f;this.curveLine.getPoint(n,i),this.driver.setVisible(!0),this.scene.tweens.killTweensOf(this.driver),this.scene.tweens.add({targets:this.driver,duration:t,x:i.x,y:i.y,onUpdate:function(t){if(null!==e.driver&&null!==e.curveLine&&e.driver.x!==i.x){var n=Phaser.Math.Percent(t.progress,0,.5);e.curveLine.getPoint(.51*n,e._tempVec0);var o=Phaser.Math.Angle.Between(e.driver.x,e.driver.y,e._tempVec0.x,e._tempVec0.y);e.driver.setRotation(o)}},onComplete:function(){if(e.isPrepared=!0,!e._hasCrashedGame){if(e.tweenLine(),null!==e.curveLine){e.curveLine.getPoint(n,e._tempVec0),e.curveLine.getPoint(n+.01,e._tempVec1);var t=Phaser.Math.Angle.Between(e._tempVec0.x,e._tempVec0.y,e._tempVec1.x,e._tempVec1.y);e.driver.setRotation(t),e.driver.copyPosition(e._tempVec0)}null!==e.snowBackground&&e.snowBackground.parallaxScrolling(),e.emit("prepareStartGameCompleted")}}})}},e.prototype.drawGraph=function(t,e){this.updateSpeed(e)},e.prototype.getPositionCashOut=function(){return this.curveLine.getPoint(.7,this._tempVec1),this._tempVec1},e.prototype.updateStatusDriver=function(t){var e=null;switch(t){case r.WIN:(e=this._getDriver("char-win")).animation.play("win",1);break;case r.LOSE:(e=this._getDriver("char-lose")).animation.play("lose",1),this._addPhysicsDriver(e);break;default:(e=this._getDriver("char-run")).animation.play("run",0),this._addPhysicsDriver(e).setCollideWorldBounds(!1)}null!==this.driver&&(e.setPosition(this.driver.x,this.driver.y),e.setRotation(this.driver.rotation),this.driver.setVisible(!1)),this.driver=e,this.startFollow()},e.prototype.mimeCashedOut=function(){var t=this;this.isMeCashedOut=!0,this.updateStatusDriver(r.WIN),null!==this.driver&&(this._addPhysicsDriver(this.driver),this.driver.once(dragonBones.EventObject.COMPLETE,(function(){null!==t.driver&&t.driver.animation.play("win_loop",0)})))},e.prototype._getDriver=function(t){if(t in this.listDriver){var e=this.listDriver[t];return e.setVisible(!0),e}var n=this.scene.add.armature(t,"char");return n.setScale(this.sceneCrash.gameScale),this.add(n),this.listDriver[t]=n,n},e.prototype._addPhysicsDriver=function(t){var e=t.body;return null===e&&(this.scene.physics.add.existing(t),(e=t.body).allowGravity=!1,e.onWorldBounds=!0,e.setCollideWorldBounds(!0),t.getBounds(this.driverBounds),e.setSize(this.driverBounds.width,this.driverBounds.height),e.setOffset(-this.driverBounds.width/2,-this.driverBounds.height)),e},e.prototype.crashGame=function(){var t=this;if(this.isPrepared=!1,this._hasCrashedGame=!0,this._markAsCompleted)null!==this.driver&&(this.soundEffect.stopRoller(),this.soundEffect.stopWindy(),this.scene.tweens.killTweensOf(this.driver),this.scene.tweens.add({targets:this.driver,x:"+="+150*l.DPR*this.sceneCrash.gameScale,y:"-="+50*l.DPR*this.sceneCrash.gameScale,rotation:Phaser.Math.DegToRad(-15),ease:Phaser.Math.Easing.Cubic.Out,duration:1e3,onComplete:function(){if(null!==t.driver){t.scene.tweens.killTweensOf(t.driver),t.isMeCashedOut||t.updateStatusDriver(r.LOSE);var e=t.driver.body;if(null!==e){var n=1-Phaser.Math.Percent(t.driver.y,0,t._boundingHeight);e.setEnable(!0),e.setBounce(.2*n+.1,.2*n+.1),e.world.on(d,t._onDriverFloor.bind(t,n),t),e.moves=!0,e.allowGravity=!0,e.velocity.reset()}t.scene.tweens.killTweensOf(t.driver),t.scene.tweens.add({targets:t.driver,rotation:Phaser.Math.DegToRad(45),duration:500})}}}));else{this._beforeCompleted=!0,null!==this.curveLine&&(this.curveLine.getPoint(1,this._tempVec1),this.scene.tweens.add({targets:this.driver,x:this._tempVec1.x,y:this._tempVec1.y,duration:500,onComplete:function(){t._markAsCompleted=!0,t._beforeCompleted=!1,t.crashGame()}})),null!==this.snowBackground&&this.snowBackground.stopParallaxScrolling();for(var e=0,n=this._listLine.length;e<n;e++){var i=this._listLine[e];i.stopTween(),i.x>this._tempVec1.x&&i.setVisible(!1)}this.startFollow(),this.removeDeadZoneCamera()}},e.prototype.clearGraph=function(){if(this.speed=e.MIN_SPEED,this._markAsCompleted=!1,this._beforeCompleted=!1,this._hasCrashedGame=!1,this.startedSpeedUp=!1,this.isMeCashedOut=!1,this.isPrepared=!1,null!==this.snowBackground&&this.snowBackground.resetParallax(),null!==this.driver){var t=this.driver.body;null!==t&&(t.allowGravity=!1,t.setEnable(!1),t.stop()),this.updateStatusDriver(r.RUN),this.resetDriver()}},e.prototype._onDriverFloor=function(t,e,n,i,o,r){i&&(e.world.off(d),this.scene.tweens.add({targets:this.driver,rotation:0,duration:900*t+500,ease:"Bounce.easeOut",easeParams:[.2*t+.2],onComplete:function(){e.setBounce(0,0),e.moves=!1}}))},e.prototype.startFollow=function(){this.theme===u.MODE_STYLES.LIGHT&&(this._beforeCompleted||this._markAsCompleted)&&this.scene.cameras.main.startFollow(this.driver,!0,.5,.5)},e.prototype.stopFollow=function(){this.scene.cameras.main.stopFollow(),this.scene.cameras.main.setScroll(0)},e.prototype.setDeadZoneCamera=function(){},e.prototype.removeDeadZoneCamera=function(){},e.prototype.onResize=function(){this.resetCurveLine(),this.resizeLine(),this.resizeDriver()},e.MIN_SPEED=.1,e.MAX_SPEED=30,e.SPEED_UP_RATIO=20,e}(Phaser.GameObjects.Container);e.SnowTheme=v},5791:(t,e)=>{"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),e.SoundEffect=void 0,function(t){t.ROLLER="roller",t.WINDY="windy"}(n||(n={}));var i=function(){function t(t){this.scene=t,this._isThemeSnow=!0,this._listPlayReady=[]}return Object.defineProperty(t.prototype,"isThemeSnow",{get:function(){return this._isThemeSnow},set:function(t){this._isThemeSnow=t;for(var e=0;e<this._listPlayReady.length;e++){var n=this.scene.sound.get(this._listPlayReady[e]);n&&(t?n.play():n.stop())}},enumerable:!1,configurable:!0}),t.prototype.playRoller=function(){if(this.shouldPlay(n.ROLLER)){var t=this.scene.sound.get(n.ROLLER);t||(t=this.scene.sound.add(n.ROLLER,{loop:!0,volume:.7})),t.play()}},t.prototype.stopRoller=function(){var t=this.scene.sound.get(n.ROLLER);t&&t.stop(),Phaser.Utils.Array.Remove(this._listPlayReady,n.ROLLER)},t.prototype.playWindy=function(){if(this.shouldPlay(n.WINDY)){var t=this.scene.sound.get(n.WINDY);t||(t=this.scene.sound.add(n.WINDY,{loop:!0,volume:.7})),t.play()}},t.prototype.stopWindy=function(){var t=this.scene.sound.get(n.WINDY);t&&t.stop(),Phaser.Utils.Array.Remove(this._listPlayReady,n.WINDY)},t.prototype.shouldPlay=function(t){return t&&this._listPlayReady.indexOf(t)<0&&this._listPlayReady.push(t),this._isThemeSnow},t}();e.SoundEffect=i},2856:function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.CompoStatistical=void 0;var r=Phaser.GameObjects.Container,s=n(1783),a=n(5080),c=function(t){function e(e){var n=t.call(this,e)||this;return n.sceneCrash=e,n.group=new s.StatisticalGroup(n.sceneCrash),n}return o(e,t),e.prototype.addMultipleStatistical=function(t){this.group.addMultipleStatistical(t,this)},e.prototype.addStatistical=function(t){this.group.addStatistical(t,this)},e.prototype.runOnDesktop=function(){this.x=this.sceneCrash.sizer.width,this.y=16,this.group.setFontSize(18)},e.prototype.runOnMobile=function(){this.x=this.sceneCrash.sizer.width,this.y=5*a.DPR,this.group.setFontSize(9*a.DPR)},e}(r);e.CompoStatistical=c},1177:function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.ItemStatistical=void 0;var r=Phaser.GameObjects.Container,s=n(3484),a=n(5080),c=function(t){function e(e,n,i){var o=t.call(this,e,n,i)||this;return o.img=o.scene.add.image(0,0,"AtlasCrashMisc","frame_large_multiplier"),o.txt=o.scene.add.text(0,0,"AtlasCrashMisc",{fontSize:15*a.DPR+"px",fontFamily:"Montserrat-SemiBold",color:"#102A51"}),o.lastX=o.x,o.img.setOrigin(0),o.txt.setOrigin(.5),o.txt.setPosition(o.img.width/2,o.img.height/2),o.add([o.img,o.txt]),o.setScrollFactor(0,0,!0),o}return o(e,t),e.prototype.updateItem=function(t){this.txt.setText(t.toFixed(2)+"x");var e=t>=s.Config.MilestoneLargeStatistical?"frame_large_multiplier":"frame_small_multiplier";this.img.setFrame(e)},e.prototype.updatePosition=function(t,e){this.setPosition(t,e),this.lastX=t},e.prototype.tweenTo=function(t){this.setVisible(!0),this.setActive(!0),this.alpha=1,this.lastX=t,this.scene.tweens.add({targets:this,x:t,duration:800})},e.prototype.tweenAlpha=function(t){var e=this;this.scene.tweens.add({targets:this,duration:800,alpha:0,onComplete:function(){t(e)}})},e.prototype.setFontSize=function(t){this.txt.setFontSize(t),this.txt.setPosition(this.img.displayWidth/2,this.img.displayHeight/2)},e.prototype.getWidth=function(){return this.img.displayWidth},e}(r);e.ItemStatistical=c},1783:function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.StatisticalGroup=void 0;var r=n(1177),s=function(t){function e(e){var n=t.call(this,e,{classType:r.ItemStatistical})||this;return n.listActivating=[],n.fontSize=18,n}return o(e,t),e.prototype.addMultipleStatistical=function(t,n){if(this.listActivating.length!==e.MAX_ITEM){var i=t.slice();i.length>e.MAX_ITEM&&(i=Phaser.Utils.Array.RemoveBetween(i,0,e.MAX_ITEM));for(var o=i.length-1;o>=0;o--){var r=i[o].game_crash;this.createItem(r/100,n)}var s=this.listActivating.length;for(o=0;o<s;o++){var a=this.listActivating[o],c=-1*(o+1)*(a.getWidth()+10);a.tweenTo(c)}}},e.prototype.addStatistical=function(t,e){this.createItem(t,e),this.tweenItems()},e.prototype.createItem=function(t,e){var n=this.get();n.updatePosition(0,0),n.updateItem(t),n.setFontSize(this.fontSize),this.listActivating.unshift(n),e.add(n)},e.prototype.tweenItems=function(){for(var t=this,n=this.listActivating.length,i=0;i<n;i++){var o=this.listActivating[i],r=o.lastX-(o.getWidth()+10);o.tweenTo(r)}if(n>e.MAX_ITEM){var s=this.listActivating.pop();s&&s.tweenAlpha((function(e){e.alpha=1,t.killAndHide(e)}))}},e.prototype.setFontSize=function(t){this.fontSize=t;for(var e=0;e<this.listActivating.length;e++){this.listActivating[e].setFontSize(this.fontSize)}},e.MAX_ITEM=5,e}(Phaser.GameObjects.Group);e.StatisticalGroup=s},7919:function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.CompoTheme=void 0;var r=n(1221),s=n(6285),a=Phaser.Renderer.Events.RESIZE,c=Phaser.Math.Vector2,h=n(5080),u=function(t){function e(e,n){var i=t.call(this,e)||this;return i.sceneCrash=e,i.compoGraph=n,i.ELAPSED=1e4,i.MAX_ELAPSED=5e4,i.RATIO=1.82,i.MAX_RATIO=11.02,i.THRESHOLD_ELAPSED=8e3,i.THRESHOLD_P1=5e3,i.graphic=null,i.curve=null,i.anchorPercentX=0,i.anchorPercentY=0,i.flagP1=!1,i.tweenP1=null,i.angleP1=0,i.startP1=!1,i.lastEndX=0,i.lastEndY=0,i._startedTweenP2=!1,i.gLineWith=10*h.DPR*i.sceneCrash.gameScale,i.gLineColor=16313438,i.currentElapsed=0,i.currentRatio=0,i.hasCrashedGame=!1,i.markAsCompleted=!1,i._anchorP0=i.sceneCrash.add.zone(0,0,2,2),i._anchorP2=i.sceneCrash.add.zone(0,0,2,2),i.sceneCrash.isMobile&&(i.gLineWith=5*h.DPR),i._anchorP0.addUIWidget(i.sceneCrash.sizer,r.HORIZONTAL_MODE.LEFT,"15%",r.VERTICAL_MODE.BOTTOM,"10%"),i.add(i._anchorP0),i._anchorP2.addUIWidget(i.sceneCrash.sizer,r.HORIZONTAL_MODE.RIGHT,"15%",r.VERTICAL_MODE.TOP,100),i.add(i._anchorP2),i.graphic=i.scene.add.graphics(),i.add(i.graphic),i.curve=new Phaser.Curves.QuadraticBezier(new c(i._anchorP0.x,i._anchorP0.y),new c(i._anchorP0.x,i._anchorP0.y),new c(i._anchorP0.x,i._anchorP0.y)),i.scene.scale.on(a,i.onResize,i),i.sceneCrash.events.on(s.EVENT_CORE.SWITCH_SCREEN_MODE,(function(t){return i.onChangeMode(t)})),i}return o(e,t),e.prototype.drawGraph=function(t,e){if(this.currentElapsed=t,this.currentRatio=e,null!==this.graphic&&null!==this.curve){var n=t/this.ELAPSED,i=Phaser.Math.Percent(e,1,this.RATIO);n=Phaser.Math.Clamp(n,this.anchorPercentX,1),i=Phaser.Math.Clamp(i,this.anchorPercentY,1),i=n,this.anchorPercentX=n,this.anchorPercentY=i;var o=Phaser.Math.FromPercent(n,this._anchorP0.x,this._anchorP2.x),r=Phaser.Math.FromPercent(i,this._anchorP0.y,this._anchorP2.y);if(this.lastEndX=o,this.lastEndY=r,this._startedTweenP2||(this._startedTweenP2=!0,this._tweenCurveP2()),t>=this.THRESHOLD_ELAPSED&&this.RATIO<this.MAX_RATIO&&this.ELAPSED<this.MAX_ELAPSED){var s=1e3,a=this.compoGraph.growthFunc(s)/100;this.ELAPSED+=s,this.THRESHOLD_ELAPSED+=s,this.RATIO+=a}if(t>=this.THRESHOLD_P1&&(this.startP1=!0),this.startP1){var c=(this._anchorP0.x+this.curve.p2.x)/2,h=(this._anchorP0.y+this.curve.p2.y)/2;this.flagP1||(this.flagP1=!0,this.curve.p1.set(c,h),this.angleP1=Math.atan2(this._anchorP0.y-h,this._anchorP2.x-c)),null!==this.tweenP1&&this.tweenP1.stop(1);var u=Math.cos(this.angleP1)+this.curve.p1.x,l=Math.sin(this.angleP1)+this.curve.p1.y;this.scene.tweens.killTweensOf(this.curve.p1),this.tweenP1=this.scene.tweens.add({targets:this.curve.p1,x:u,y:l,duration:500})}}},e.prototype._tweenCurveP2=function(){var t=this;null!==this.curve&&(this.scene.tweens.killTweensOf(this.curve.p2),this.scene.tweens.add({targets:this.curve.p2,x:this.lastEndX,y:this.lastEndY,duration:500,onUpdate:this._onUpdateCurveP2,onUpdateScope:this,onComplete:function(){t.markAsCompleted||t._tweenCurveP2(),t.hasCrashedGame&&(t.markAsCompleted=!0)}}))},e.prototype._onUpdateCurveP2=function(t,e,n){null!==this.graphic&&null!==this.curve&&(this.graphic.clear().lineStyle(this.gLineWith,this.gLineColor),this.curve.draw(this.graphic,128))},e.prototype.resetValues=function(){this.ELAPSED=1e4,this.RATIO=1.82,this.THRESHOLD_ELAPSED=8e3,this.currentElapsed=0,this.currentRatio=0,this.anchorPercentX=0,this.anchorPercentY=0,this.lastEndX=0,this.lastEndY=0,this.flagP1=!1,this.startP1=!1,this._startedTweenP2=!1,this.hasCrashedGame=!1,this.markAsCompleted=!1},e.prototype.clearGraph=function(){this.resetValues(),null!==this.curve&&(this.scene.tweens.killTweensOf(this.curve.p1),this.scene.tweens.killTweensOf(this.curve.p2),this.curve.p1.copy(this.curve.p0),this.curve.p2.copy(this.curve.p0)),null!==this.graphic&&this.graphic.clear()},e.prototype.crashGame=function(){this.hasCrashedGame=!0},e.prototype.onResize=function(){null!==this.curve&&null!==this._anchorP0&&(this.curve.p0.set(this._anchorP0.x,this._anchorP0.y),this.curve.p1.copy(this.curve.p0)),this.hasCrashedGame&&e.prototype._tweenCurveP2.call(this)},e.prototype.onChangeMode=function(t){t?null!==this._anchorP2&&null!==this._anchorP2.uiWidget&&this._anchorP2.uiWidget.setVertical(r.VERTICAL_MODE.TOP,100):null!==this._anchorP2&&null!==this._anchorP2.uiWidget&&this._anchorP2.uiWidget.setVertical(r.VERTICAL_MODE.TOP,"15%")},e}(Phaser.GameObjects.Container);e.CompoTheme=u},2863:function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.EnvironmentMeteor=void 0;var r=Phaser.GameObjects.Container,s=n(5080),a=function(t){function e(e){var n=t.call(this,e)||this;n.sceneCrash=e,n.particle=n.sceneCrash.add.particles("AtlasCrashMisc"),n._infoParticle={mx:0,my:0,angle:0};var i=n.sceneCrash.isMobile,o=n.sceneCrash.sizer.width+(i?500*s.DPR:1e3),r=i?-500*s.DPR:-1e3;return n.particle.createEmitter({frame:["asteroids-0","asteroids-1"],tint:[16777215,8882055],scale:{min:.2,max:1},angle:{min:110,max:160},accelerationX:{min:i?-150*s.DPR:-300,max:i?-5*s.DPR:-10},accelerationY:{min:i?5*s.DPR:10,max:i?150*s.DPR:300},lifespan:1e4,frequency:n.sceneCrash.isMobile?1e3:500,rotate:{start:3600,end:0}}),n.particle.createEmitter({frame:["firework_1","firework_2","firework_3"],scale:{min:.5,max:1},moveToX:{onEmit:function(t){return n._infoParticle.mx=Phaser.Math.FloatBetween(-o,2*-o),n._infoParticle.mx}},moveToY:{onEmit:function(t){return n._infoParticle.my=Phaser.Math.FloatBetween(Math.abs(r)+n.sceneCrash.sizer.height,2*(Math.abs(r)+n.sceneCrash.sizer.height)),n._infoParticle.my}},lifespan:5e3,frequency:n.sceneCrash.isMobile?1e3:500,rotate:{onEmit:function(t){var e=Phaser.Math.Angle.Between(t.x,t.y,n._infoParticle.mx,n._infoParticle.my);return e=Phaser.Math.RadToDeg(e)}}}),n.particle.setPosition(o,r),n.add(n.particle),n}return o(e,t),e}(r);e.EnvironmentMeteor=a},5715:function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.ExplodeMeteor=void 0;var r=Phaser.GameObjects.Container,s=n(5080),a=function(t){function e(e){var n=t.call(this,e)||this;n.sceneCrash=e,n.explodeEffect=n.sceneCrash.add.sprite(0,0,""),n.particles=n.sceneCrash.add.particles("AtlasCrashMisc"),n.meteor=n.sceneCrash.add.image(0,0,"AtlasCrashMisc","asteroids-0");var i=n.sceneCrash.isMobile;return e.anims.create({key:"meteor-explode",frames:e.anims.generateFrameNames("AtlasCrashMeteorExplode",{prefix:"meteor-explode-",start:0,end:8}),duration:500,repeat:0,showOnStart:!0,hideOnComplete:!0}),n.particles.createEmitter({frame:["asteroids-0","asteroids-1"],angle:{min:240,max:300},speed:{min:i?300*s.DPR:400,max:i?400*s.DPR:600},accelerationY:{start:i?-150*s.DPR:-300,end:i?200*s.DPR:600,random:!1},quantity:{min:10,max:20},lifespan:4e3,scale:{min:.1,max:.8},rotate:{start:0,end:360,ease:"Back.easeOut"},gravityY:i?500*s.DPR:800,on:!1}),n.add(n.particles),n.add(n.explodeEffect),n.add(n.meteor),n.meteor.setScale(1.5),n.explodeEffect.setScale(1.5),n.explodeEffect.setVisible(!1),n}return o(e,t),e.prototype.explode=function(t){var e=this;this.meteor.setPosition(this.sceneCrash.sizer.width+100,-100),this.meteor.setVisible(!0),this.sceneCrash.tweens.add({targets:this.meteor,duration:500,rotation:2*Math.PI,x:this.sceneCrash.sizer.width/2+50,y:this.sceneCrash.sizer.height/2-20,onComplete:function(){e.explodeEffect.setPosition(e.meteor.x,e.meteor.y),e.explodeEffect.play("meteor-explode"),e.particles.emitParticleAt(e.meteor.x,e.meteor.y),e.meteor.setVisible(!1),t&&t()}})},e}(r);e.ExplodeMeteor=a},9558:function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.TailShip=void 0;var r=Phaser.GameObjects.Container,s=n(5080),a=function(t){function e(e,n){var i=t.call(this,e)||this;return i.sceneCrash=e,i.spaceship=n,i.particleManager=i.sceneCrash.add.particles("AtlasCrashMisc",void 0,[{angle:0,speed:{min:i.sceneCrash.isMobile?10*s.DPR:20,max:i.sceneCrash.isMobile?50*s.DPR:100},scale:{start:1,end:0},alpha:{start:0,end:.5},blendMode:"ADD",lifespan:1500,reserve:i.sceneCrash.isMobile?0:1e3,frequency:i.sceneCrash.isMobile?30:10,frame:"smoke-white",tint:5066061,follow:i.spaceship},{name:"fire",angle:0,speed:{min:i.sceneCrash.isMobile?50*s.DPR:100,max:i.sceneCrash.isMobile?100*s.DPR:200},scale:{start:0,end:2,ease:"Back.easeOut"},alpha:{start:1,end:0,ease:"Quart.easeOut"},blendMode:"ADD",lifespan:700,reserve:i.sceneCrash.isMobile?0:1e3,frequency:i.sceneCrash.isMobile?30:10,frame:"fire",follow:i.spaceship}]),i.circle=new Phaser.Geom.Circle(0,0,i.sceneCrash.isMobile?25*s.DPR:50),i.add(i.particleManager),i}return o(e,t),e.prototype.play=function(){for(var t=0;t<this.particleManager.emitters.length;t++)this.particleManager.emitters.getAt(t).start()},e.prototype.stop=function(){for(var t=0;t<this.particleManager.emitters.length;t++)this.particleManager.emitters.getAt(t).stop().setTint(16777215)},e.prototype.setAngleParticle=function(t){var e=this;this.particleManager.emitters.each((function(n){if(n.setAngle(Phaser.Math.RadToDeg(t)),"fire"!==n.name){var i=Phaser.Geom.Circle.CircumferencePoint(e.circle,t);n.followOffset.set(i.x,i.y)}}))},e.prototype.quantityParticle=function(t){if(!(t<1)){var e=Phaser.Math.Percent(t,1,20),n=Phaser.Math.FromPercent(e,1,8),i=Phaser.Math.FromPercent(e,800,3e3);this.particleManager.emitters.each((function(e){e.setQuantity(n),"fire"===e.name?(e.setLifespan(i),t>=10&&e.setTint([16407810,16406786])):e.setLifespan(2*i)}))}},e}(r);e.TailShip=a},8873:function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.UniversalTheme=void 0;var r=n(7919),s=n(1221),a=n(9558),c=n(5715),h=n(2863),u=n(3243),l=n(6871),p=Phaser.Math.Vector2,d=n(3484),f=function(t){function e(e,n){var i=t.call(this,e,n)||this;i.background=i.sceneCrash.add.tileSprite(0,0,i.sceneCrash.sizer.height,i.sceneCrash.sizer.width,"background_dark"),i.spaceship=i.sceneCrash.add.image(-999,-999,"AtlasCrashMisc","spaceship"),i.tailShip=new a.TailShip(i.sceneCrash,i.spaceship),i.environmentMeteor=new h.EnvironmentMeteor(i.sceneCrash),i.explodeMeteor=null,i.startingSpaceship=new p(0,i.sceneCrash.sizer.height),i.endingSpaceship=new p(i.sceneCrash.sizer.width/2,i.sceneCrash.sizer.height/2),i.maxTileScale=5,i.speedBackground=0,i._tilePosition=0,i._isFirstTimeSpaceship=!0,i._isFirstTimeBackground=!0,i._tweenScaleBackground=null,i._tweenPositionBackground=null,i._tweenScaleSpaceship=null,i._tweenRotationSpaceship=null,i.resetValues(),i.background.setOrigin(.5),i.background.angle=-90,i.background.setData("fake",1),i.add(i.background),i.sendToBack(i.background),e.isMobile?i.background.addUIWidget(i.sceneCrash.sizer,s.HORIZONTAL_MODE.CENTER,0,s.VERTICAL_MODE.CENTER,0):i.background.setPosition(e.sizer.width/2,e.sizer.height/2),i.add(i.environmentMeteor),i.add(i.tailShip),i.spaceship.setOrigin(.2,.5),i.spaceship.setScale(i.sceneCrash.gameScale),i.spaceship.setVisible(!1),i.add(i.spaceship);var o=Phaser.Math.Angle.BetweenPoints(i.startingSpaceship,i.endingSpaceship);return i.angleSpaceship=Phaser.Math.RadToDeg(o),i.spaceship.setRotation(o),i.tailShip.setAngleParticle(o-Math.PI),i.resetBackground(),i.playBgSoundDark(),i}return o(e,t),e.prototype.playBgSoundDark=function(){this.sceneCrash.soundManager.play("bg-dark-mode",{loop:!0,volume:.2,seek:0})},e.prototype.onJoined=function(t){u.GameData.state===u.STATE_GAME.IN_PROGRESS?(this.startedGame(),this.sceneCrash.soundManager.seek("bg-dark-mode",10)):this.prepareStartGame(t)},e.prototype.prepareStartGame=function(t){this.playBgSoundDark(),this.sceneCrash.soundManager.seek("bg-dark-mode",Math.max(0,(d.Config.TimeoutStart-t)/1e3))},e.prototype.startedGame=function(){this._startingSpaceship(),this._animatedSpaceship(),this._animatedBackground(),this._animatedScaleBackground(),this.tailShip.play()},e.prototype.onChangeTheme=function(t){this.sceneCrash.soundManager.mute("bg-dark-mode",t===l.MODE_STYLES.LIGHT)},e.prototype._onUpdateCurveP2=function(t,e,n){},e.prototype.getPositionCashOut=function(){return new p(this.spaceship.x,this.spaceship.y)},e.prototype.crashGame=function(){var e=this;t.prototype.crashGame.call(this),null===this.explodeMeteor&&(this.explodeMeteor=new c.ExplodeMeteor(this.sceneCrash),this.add(this.explodeMeteor)),this.explodeMeteor.explode((function(){e._stopAnimatedSpaceship(),e._stopAnimatedBackground(),e.tailShip.stop(),e.spaceship.setVisible(!1)}))},e.prototype.drawGraph=function(e,n){t.prototype.drawGraph.call(this,e,n),this.speedBackground=Phaser.Math.Clamp(n,0,20),this._updateShaking(n)},e.prototype.clearGraph=function(){t.prototype.clearGraph.call(this),this.speedBackground=0,this.spaceship.setVisible(!1),this.spaceship.copyPosition(this.startingSpaceship)},e.prototype.resetBackground=function(){var t=Phaser.Math.FloatBetween(1,this.maxTileScale);this.background.setTileScale(t,t)},e.prototype._startingSpaceship=function(){this.spaceship.setVisible(!0),this.spaceship.copyPosition(this.startingSpaceship),this.sceneCrash.tweens.add({targets:this.spaceship,duration:500,x:this.endingSpaceship.x,y:this.endingSpaceship.y})},e.prototype._firstTimeAnimatedSpaceship=function(){var t=this;if(null===this._tweenScaleSpaceship){var e=this.background.tileScaleX,n=Phaser.Math.Percent(e,1,this.maxTileScale),i=Phaser.Math.FromPercent(n,.3,1),o=Phaser.Math.FromPercent(n,7500,0);this.spaceship.setScale(i),this._tweenScaleSpaceship=this.sceneCrash.tweens.add({targets:this.spaceship,duration:o,scaleX:1,scaleY:1,onComplete:function(){t._isFirstTimeSpaceship=!1,t._tweenScaleSpaceship=null,t._animatedSpaceship()}})}else this._tweenScaleSpaceship.resume()},e.prototype._animatedSpaceship=function(){this._isFirstTimeSpaceship?this._firstTimeAnimatedSpaceship():null===this._tweenScaleSpaceship?this._tweenScaleSpaceship=this.sceneCrash.tweens.add({targets:this.spaceship,duration:15e3,scaleX:.3,scaleY:.3,repeat:-1,repeatDelay:2e3,yoyo:!0}):this._tweenScaleSpaceship.resume()},e.prototype._animatedShakingSpaceship=function(){null===this._tweenRotationSpaceship?(this.spaceship.setAngle(this.angleSpaceship-.5),this._tweenRotationSpaceship=this.sceneCrash.tweens.add({targets:this.spaceship,duration:1e3,angle:this.angleSpaceship+.5,repeat:-1,yoyo:!0})):this._tweenRotationSpaceship.resume()},e.prototype._stopAnimatedSpaceship=function(){null!==this._tweenScaleSpaceship&&this._tweenScaleSpaceship.pause(),null!==this._tweenRotationSpaceship&&(this._tweenRotationSpaceship.pause(),this._tweenRotationSpaceship.setTimeScale(1))},e.prototype._updateShaking=function(t){if(!(t<5)&&(this._animatedShakingSpaceship(),null!==this._tweenRotationSpaceship)){var e=Phaser.Math.Percent(t,5,10),n=Phaser.Math.FromPercent(e,1,10);this._tweenRotationSpaceship.setTimeScale(n)}},e.prototype._animatedBackground=function(){var t=this;null===this._tweenPositionBackground?this._tweenPositionBackground=this.sceneCrash.tweens.add({targets:this.background,duration:5e3,fake:1,onUpdate:function(){t._tilePosition+=t.speedBackground,t.background.setTilePosition(t._tilePosition,t._tilePosition)},repeat:-1}):this._tweenPositionBackground.resume()},e.prototype._firstTimeAnimatedBackground=function(){var t=this;if(null===this._tweenScaleBackground){var e=this.background.tileScaleX,n=Phaser.Math.Percent(e,1,this.maxTileScale),i=Phaser.Math.FromPercent(n,7500,0);this._tweenScaleBackground=this.sceneCrash.tweens.add({targets:this.background,duration:i,tileScaleX:this.maxTileScale,tileScaleY:this.maxTileScale,ease:Phaser.Math.Easing.Expo.Out,onComplete:function(){t._isFirstTimeBackground=!1,t._tweenScaleBackground=null,t._animatedScaleBackground()}})}else this._tweenScaleBackground.resume()},e.prototype._animatedScaleBackground=function(){this._isFirstTimeBackground?this._firstTimeAnimatedBackground():null===this._tweenScaleBackground?this._tweenScaleBackground=this.sceneCrash.tweens.add({targets:this.background,duration:15e3,tileScaleX:1,tileScaleY:1,ease:Phaser.Math.Easing.Expo.Out,repeat:-1,repeatDelay:2e3,yoyo:!0}):this._tweenScaleBackground.resume()},e.prototype._stopAnimatedBackground=function(){null!==this._tweenScaleBackground&&this._tweenScaleBackground.pause(),null!==this._tweenPositionBackground&&this._tweenPositionBackground.pause()},e}(r.CompoTheme);e.UniversalTheme=f},9992:function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.CompoTest=void 0;var r=Phaser.GameObjects.Container,s=Phaser.Input.Events.POINTER_DOWN,a=n(5080),c=function(t){function e(e){var n=t.call(this,e)||this;n.sceneCrash=e;var i=n.sceneCrash.make.container({});return i.x=50,i.y=n.sceneCrash.sizer.height/2,n.add(i),n._addButton(i,"Bet",(function(){n.sceneCrash.receiveController.requestBet(500,110)})),n}return o(e,t),e.prototype._addButton=function(t,e,n){var i=this.scene.make.graphics({});i.fillStyle(16777215).fillRoundedRect(0,0,100,50,5),i.setInteractive({useHandCursor:!0,hitArea:new Phaser.Geom.Rectangle(0,0,100,50),hitAreaCallback:Phaser.Geom.Rectangle.Contains}).on(s,n,this),t.add(i);var o=this.scene.make.text({style:{color:"#000000",fontFamily:"Montserrat-SemiBold",fontSize:18*a.DPR+"px",align:"center"}});o.setText(e),o.setOrigin(.5),o.setPosition(50,25),t.add(o)},e}(r);e.CompoTest=c},3484:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Config=void 0;var i=n(8356);e.Config=Object.assign(i.Config,{DEV:!1,PATH_ASSETS:"crash/",WS_LOCAL:"wss://funasia-game-crash-beta.azurewebsites.net",DEFAULT_THEME:1,TimeoutStart:1e4,MilestoneLargeStatistical:2})},3243:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GameData=e.STATE_GAME=void 0,function(t){t.IN_PROGRESS="IN_PROGRESS",t.ENDED="ENDED",t.STARTING="STARTING"}(e.STATE_GAME||(e.STATE_GAME={})),e.GameData={walletId:"",state:"",playerInfo:{},gameId:0,elapsed:0,userName:"",history:[]}},2402:function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.SceneCrash=void 0;var r=n(3484),s=n(9672),a=n(1459),c=n(5314),h=n(3243),u=n(1221),l=n(6285),p=n(6871),d=n(2149),f=n(490),v=n(9323),m=n(9992),y=n(5080),g=n(6517),_=function(t){function e(){var n=t.call(this,{key:e.SCENE_NAME,physics:{default:"arcade",arcade:{debug:!1,gravity:new Phaser.Math.Vector2(100,2e3),checkCollision:{left:!1,right:!1,down:!1,up:!1}}}})||this;return n.soundManager=new g.SoundManager(n),n.compoGraph=null,n.compoMenu=null,n.compoMenuWidget=null,n.socketController=null,n.receiveController=new a.ReceiveController(n),n.theme=p.MODE_STYLES.LIGHT,n._soundBackground=null,n.joinBinded=n._onJoin.bind(n),n}return o(e,t),e.prototype.init=function(){t.prototype.init.call(this)},e.prototype.preload=function(){this.load.setPath(r.Config.PATH_ASSETS),this.loadAssets(c.AssetsManifest)},e.prototype.forceResize=function(){this.scale.scaleMode=Phaser.Scale.ScaleModes.WIDTH_CONTROLS_HEIGHT;var t=360*y.DPR,e=262*y.DPR;this.scale.setGameSize(t,e),this.sizer.setSize(t,e)},e.prototype.initGame=function(){var t=this;if(this.isMobile&&this.forceResize(),this.playBgSoundLight(),this.compoGraph=new s.CompoGraph(this),this.add.existing(this.compoGraph),this.compoMenu=new p.CompoMenu(this),this.add.existing(this.compoMenu),null!==this.compoMenu.background&&(this.compoMenuWidget=this.compoMenu.addUIWidget(this.sizer,u.HORIZONTAL_MODE.LEFT,16,u.VERTICAL_MODE.TOP,16),this.compoMenu.setScrollFactor(0,0,!0),this.compoMenu.on(p.THEME_EVENT.MODE,this.onChangeTheme,this),this.compoMenu.on(p.THEME_EVENT.MUSIC,(function(e){e?t.playBgSoundLight():t.stopBgSoundLight()}),this)),this.onChangeTheme(p.MODE_STYLES.LIGHT),this.events.once(l.EVENT_CORE.DEVICE_DESKTOP,this.runOnDesktop,this),this.events.once(l.EVENT_CORE.DEVICE_MOBILE,this.runOnMobile,this),this.runOnDevice(),this.updateBoundCamera(),window.addEventListener("join",this.joinBinded),f.Utils.dispatchCustomEvent("readyCrash",{detail:this}),r.Config.DEV){var e=new m.CompoTest(this);this.add.existing(e)}},e.prototype._onJoin=function(t){this.receiveController.updateSocket(window.customSocketCrash),this.receiveController.onJoin(t.detail)},e.prototype.onChangeTheme=function(t){this.theme=t,null!==this.compoGraph&&this.compoGraph.changeTheme(t)},e.prototype.playBgSoundLight=function(){if(this.theme!==p.MODE_STYLES.DARK){var t=Phaser.Utils.Array.GetRandom(["background-1","background-2","background-3"]);this._soundBackground=this.soundManager.play(t,{loop:!0,volume:.2})}},e.prototype.stopBgSoundLight=function(){null!==this._soundBackground&&this._soundBackground.stop()},e.prototype.muteBgSoundLight=function(t){null!==this._soundBackground&&this._soundBackground.setMute(t)},e.prototype.onJoined=function(){null!==this.compoGraph&&(this.compoGraph.clearGraph(),this.compoGraph.onJoined()),h.GameData.state===h.STATE_GAME.IN_PROGRESS&&this.messageTick(h.GameData.elapsed)},e.prototype.messageStartingGame=function(t,e,n){null!==this.compoGraph&&(this.compoGraph.clearGraph(),this.compoGraph.prepareStartGame(n))},e.prototype.messageStartedGame=function(){null!==this.compoGraph&&this.compoGraph.startedGame()},e.prototype.messageTick=function(t){null!==this.compoGraph&&this.compoGraph.updateElapsed(t)},e.prototype.messageCrash=function(t,e,n,i,o){null!==this.compoGraph&&this.compoGraph.crashGame(i)},e.prototype.messageCashedOut=function(t,e){null!==this.compoGraph&&this.compoGraph.userCashedOut(t,e)},e.prototype.messagePlayerBet=function(t,e){},e.prototype.connectToServerDev=function(t){null===this.socketController?this.socketController=new v.SocketController(this.receiveController):this.socketController.closeSocket(r.Config.WS_LOCAL),this.socketController.initSocket(r.Config.WS_LOCAL,t)},e.prototype.closeSocket=function(){null!==this.socketController&&this.socketController.closeAllSocket()},e.prototype.updateBoundCamera=function(){var t=this.scale.gameSize,e=1.8*t.width,n=2*t.height,i=-t.height;this.cameras.main.setBounds(0,i,e,n),this.physics.world.setBounds(0,i,e,n)},e.prototype.destroy=function(){t.prototype.destroy.call(this),window.removeEventListener("join",this.joinBinded),this.closeSocket(),null!==this.receiveController&&this.receiveController.destroy()},e.prototype.runOnDesktop=function(){null!==this.compoMenu&&this.compoMenu.setScale(this.gameScale),null!==this.compoMenuWidget&&(this.compoMenuWidget.setHorizontal(u.HORIZONTAL_MODE.LEFT,16),this.compoMenuWidget.setVertical(u.VERTICAL_MODE.TOP,16)),null!==this.compoGraph&&this.compoGraph.runOnDesktop()},e.prototype.runOnMobile=function(){null!==this.compoMenuWidget&&(this.compoMenuWidget.setHorizontal(u.HORIZONTAL_MODE.LEFT,0),this.compoMenuWidget.setVertical(u.VERTICAL_MODE.TOP,0)),null!==this.compoGraph&&this.compoGraph.runOnMobile()},e.SCENE_NAME="sceneCrash",e}(d.GeneralScene);e.SceneCrash=_},1459:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ReceiveController=void 0;var i,o=n(3243),r=n(6285);!function(t){t.GAME_STARTING="game_starting",t.GAME_STARTED="game_started",t.GAME_TICK="game_tick",t.GAME_CRASH="game_crash",t.CASHED_OUT="cashed_out",t.PLAYER_BET="player_bet"}(i||(i={}));var s=function(){function t(t){this.scene=t,this.socket=null}return t.prototype.updateSocket=function(t){null===this.socket&&(t.on(i.GAME_STARTING,this.onMessageGameStarting.bind(this)),t.on(i.GAME_STARTED,this.onMessageGameStarted.bind(this)),t.on(i.GAME_TICK,this.onMessageTick.bind(this)),t.on(i.GAME_CRASH,this.onMessageCrash.bind(this)),t.on(i.CASHED_OUT,this.onMessageCashedOut.bind(this)),t.on(i.PLAYER_BET,this.onMessagePlayerBet.bind(this))),this.socket=t},t.prototype.onConnected=function(){var t=this;console.error("onConnected",this.socket),null!==this.socket&&this.socket.emit("authenticate",(function(e,n){t.onJoin(n)}))},t.prototype.onClosed=function(){},t.prototype.onError=function(){},t.prototype.destroy=function(){},t.prototype.onJoin=function(t){console.log(t),this.scene.game.events.emit(r.EVENT_CORE.CONNECTED_SERVER),o.GameData.userName=t.username||"",o.GameData.state=t.state,o.GameData.gameId=t.game_id,o.GameData.playerInfo=t.player_info,o.GameData.elapsed=t.elapsed,o.GameData.history=t.table_history,this.scene.onJoined()},t.prototype.onMessageGameStarting=function(t){this.scene.messageStartingGame(t.game_id,t.max_win,t.time_till_start)},t.prototype.onMessageGameStarted=function(t){this.scene.messageStartedGame()},t.prototype.onMessageTick=function(t){this.scene.messageTick(t)},t.prototype.onMessageCrash=function(t){this.scene.messageCrash(t.bonuses,t.elapsed,t.forced,t.game_crash,t.hash)},t.prototype.onMessageCashedOut=function(t){this.scene.messageCashedOut(t.username,t.stopped_at)},t.prototype.onMessagePlayerBet=function(t){this.scene.messagePlayerBet(t.username,t.index)},t.prototype.requestBet=function(t,e){null!==this.socket&&this.socket.emit("place_bet",t,e,o.GameData.walletId)},t}();e.ReceiveController=s},5933:(t,e,n)=>{var i;!function(){function o(t,e,n){return t.call.apply(t.bind,arguments)}function r(t,e,n){if(!t)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,i),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function s(t,e,n){return(s=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?o:r).apply(null,arguments)}var a=Date.now||function(){return+new Date};function c(t,e){this.a=t,this.o=e||t,this.c=this.o.document}var h=!!window.FontFace;function u(t,e,n,i){if(e=t.c.createElement(e),n)for(var o in n)n.hasOwnProperty(o)&&("style"==o?e.style.cssText=n[o]:e.setAttribute(o,n[o]));return i&&e.appendChild(t.c.createTextNode(i)),e}function l(t,e,n){(t=t.c.getElementsByTagName(e)[0])||(t=document.documentElement),t.insertBefore(n,t.lastChild)}function p(t){t.parentNode&&t.parentNode.removeChild(t)}function d(t,e,n){e=e||[],n=n||[];for(var i=t.className.split(/\s+/),o=0;o<e.length;o+=1){for(var r=!1,s=0;s<i.length;s+=1)if(e[o]===i[s]){r=!0;break}r||i.push(e[o])}for(e=[],o=0;o<i.length;o+=1){for(r=!1,s=0;s<n.length;s+=1)if(i[o]===n[s]){r=!0;break}r||e.push(i[o])}t.className=e.join(" ").replace(/\s+/g," ").replace(/^\s+|\s+$/,"")}function f(t,e){for(var n=t.className.split(/\s+/),i=0,o=n.length;i<o;i++)if(n[i]==e)return!0;return!1}function v(t,e,n){function i(){a&&o&&r&&(a(s),a=null)}e=u(t,"link",{rel:"stylesheet",href:e,media:"all"});var o=!1,r=!0,s=null,a=n||null;h?(e.onload=function(){o=!0,i()},e.onerror=function(){o=!0,s=Error("Stylesheet failed to load"),i()}):setTimeout((function(){o=!0,i()}),0),l(t,"head",e)}function m(t,e,n,i){var o=t.c.getElementsByTagName("head")[0];if(o){var r=u(t,"script",{src:e}),s=!1;return r.onload=r.onreadystatechange=function(){s||this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(s=!0,n&&n(null),r.onload=r.onreadystatechange=null,"HEAD"==r.parentNode.tagName&&o.removeChild(r))},o.appendChild(r),setTimeout((function(){s||(s=!0,n&&n(Error("Script load timeout")))}),i||5e3),r}return null}function y(){this.a=0,this.c=null}function g(t){return t.a++,function(){t.a--,b(t)}}function _(t,e){t.c=e,b(t)}function b(t){0==t.a&&t.c&&(t.c(),t.c=null)}function E(t){this.a=t||"-"}function S(t,e){this.c=t,this.f=4,this.a="n";var n=(e||"n4").match(/^([nio])([1-9])$/i);n&&(this.a=n[1],this.f=parseInt(n[2],10))}function w(t){var e=[];t=t.split(/,\s*/);for(var n=0;n<t.length;n++){var i=t[n].replace(/['"]/g,"");-1!=i.indexOf(" ")||/^\d/.test(i)?e.push("'"+i+"'"):e.push(i)}return e.join(",")}function T(t){return t.a+t.f}function C(t){var e="normal";return"o"===t.a?e="oblique":"i"===t.a&&(e="italic"),e}function O(t){var e=4,n="n",i=null;return t&&((i=t.match(/(normal|oblique|italic)/i))&&i[1]&&(n=i[1].substr(0,1).toLowerCase()),(i=t.match(/([1-9]00|normal|bold)/i))&&i[1]&&(/bold/i.test(i[1])?e=7:/[1-9]00/.test(i[1])&&(e=parseInt(i[1].substr(0,1),10)))),n+e}function k(t,e){this.c=t,this.f=t.o.document.documentElement,this.h=e,this.a=new E("-"),this.j=!1!==e.events,this.g=!1!==e.classes}function P(t){if(t.g){var e=f(t.f,t.a.c("wf","active")),n=[],i=[t.a.c("wf","loading")];e||n.push(t.a.c("wf","inactive")),d(t.f,n,i)}M(t,"inactive")}function M(t,e,n){t.j&&t.h[e]&&(n?t.h[e](n.c,T(n)):t.h[e]())}function R(){this.c={}}function A(t,e){this.c=t,this.f=e,this.a=u(this.c,"span",{"aria-hidden":"true"},this.f)}function x(t){l(t.c,"body",t.a)}function L(t){return"display:block;position:absolute;top:-9999px;left:-9999px;font-size:300px;width:auto;height:auto;line-height:normal;margin:0;padding:0;font-variant:normal;white-space:nowrap;font-family:"+w(t.c)+";font-style:"+C(t)+";font-weight:"+t.f+"00;"}function D(t,e,n,i,o,r){this.g=t,this.j=e,this.a=i,this.c=n,this.f=o||3e3,this.h=r||void 0}function N(t,e,n,i,o,r,s){this.v=t,this.B=e,this.c=n,this.a=i,this.s=s||"BESbswy",this.f={},this.w=o||3e3,this.u=r||null,this.m=this.j=this.h=this.g=null,this.g=new A(this.c,this.s),this.h=new A(this.c,this.s),this.j=new A(this.c,this.s),this.m=new A(this.c,this.s),t=L(t=new S(this.a.c+",serif",T(this.a))),this.g.a.style.cssText=t,t=L(t=new S(this.a.c+",sans-serif",T(this.a))),this.h.a.style.cssText=t,t=L(t=new S("serif",T(this.a))),this.j.a.style.cssText=t,t=L(t=new S("sans-serif",T(this.a))),this.m.a.style.cssText=t,x(this.g),x(this.h),x(this.j),x(this.m)}E.prototype.c=function(t){for(var e=[],n=0;n<arguments.length;n++)e.push(arguments[n].replace(/[\W_]+/g,"").toLowerCase());return e.join(this.a)},D.prototype.start=function(){var t=this.c.o.document,e=this,n=a(),i=new Promise((function(i,o){!function r(){a()-n>=e.f?o():t.fonts.load(function(t){return C(t)+" "+t.f+"00 300px "+w(t.c)}(e.a),e.h).then((function(t){1<=t.length?i():setTimeout(r,25)}),(function(){o()}))}()})),o=null,r=new Promise((function(t,n){o=setTimeout(n,e.f)}));Promise.race([r,i]).then((function(){o&&(clearTimeout(o),o=null),e.g(e.a)}),(function(){e.j(e.a)}))};var B={D:"serif",C:"sans-serif"},I=null;function G(){if(null===I){var t=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent);I=!!t&&(536>parseInt(t[1],10)||536===parseInt(t[1],10)&&11>=parseInt(t[2],10))}return I}function j(t,e,n){for(var i in B)if(B.hasOwnProperty(i)&&e===t.f[B[i]]&&n===t.f[B[i]])return!0;return!1}function V(t){var e,n=t.g.a.offsetWidth,i=t.h.a.offsetWidth;(e=n===t.f.serif&&i===t.f["sans-serif"])||(e=G()&&j(t,n,i)),e?a()-t.A>=t.w?G()&&j(t,n,i)&&(null===t.u||t.u.hasOwnProperty(t.a.c))?F(t,t.v):F(t,t.B):function(t){setTimeout(s((function(){V(this)}),t),50)}(t):F(t,t.v)}function F(t,e){setTimeout(s((function(){p(this.g.a),p(this.h.a),p(this.j.a),p(this.m.a),e(this.a)}),t),0)}function z(t,e,n){this.c=t,this.a=e,this.f=0,this.m=this.j=!1,this.s=n}N.prototype.start=function(){this.f.serif=this.j.a.offsetWidth,this.f["sans-serif"]=this.m.a.offsetWidth,this.A=a(),V(this)};var H=null;function U(t){0==--t.f&&t.j&&(t.m?((t=t.a).g&&d(t.f,[t.a.c("wf","active")],[t.a.c("wf","loading"),t.a.c("wf","inactive")]),M(t,"active")):P(t.a))}function W(t){this.j=t,this.a=new R,this.h=0,this.f=this.g=!0}function Y(t,e,n,i,o){var r=0==--t.h;(t.f||t.g)&&setTimeout((function(){var t=o||null,a=i||{};if(0===n.length&&r)P(e.a);else{e.f+=n.length,r&&(e.j=r);var c,h=[];for(c=0;c<n.length;c++){var u=n[c],l=a[u.c],p=e.a,f=u;if(p.g&&d(p.f,[p.a.c("wf",f.c,T(f).toString(),"loading")]),M(p,"fontloading",f),p=null,null===H)if(window.FontFace){f=/Gecko.*Firefox\/(\d+)/.exec(window.navigator.userAgent);var v=/OS X.*Version\/10\..*Safari/.exec(window.navigator.userAgent)&&/Apple/.exec(window.navigator.vendor);H=f?42<parseInt(f[1],10):!v}else H=!1;p=H?new D(s(e.g,e),s(e.h,e),e.c,u,e.s,l):new N(s(e.g,e),s(e.h,e),e.c,u,e.s,t,l),h.push(p)}for(c=0;c<h.length;c++)h[c].start()}}),0)}function X(t,e){this.c=t,this.a=e}function q(t,e){this.c=t,this.a=e}function K(t,e){this.c=t||J,this.a=[],this.f=[],this.g=e||""}z.prototype.g=function(t){var e=this.a;e.g&&d(e.f,[e.a.c("wf",t.c,T(t).toString(),"active")],[e.a.c("wf",t.c,T(t).toString(),"loading"),e.a.c("wf",t.c,T(t).toString(),"inactive")]),M(e,"fontactive",t),this.m=!0,U(this)},z.prototype.h=function(t){var e=this.a;if(e.g){var n=f(e.f,e.a.c("wf",t.c,T(t).toString(),"active")),i=[],o=[e.a.c("wf",t.c,T(t).toString(),"loading")];n||i.push(e.a.c("wf",t.c,T(t).toString(),"inactive")),d(e.f,i,o)}M(e,"fontinactive",t),U(this)},W.prototype.load=function(t){this.c=new c(this.j,t.context||this.j),this.g=!1!==t.events,this.f=!1!==t.classes,function(t,e,n){var i=[],o=n.timeout;!function(t){t.g&&d(t.f,[t.a.c("wf","loading")]),M(t,"loading")}(e);i=function(t,e,n){var i,o=[];for(i in e)if(e.hasOwnProperty(i)){var r=t.c[i];r&&o.push(r(e[i],n))}return o}(t.a,n,t.c);var r=new z(t.c,e,o);for(t.h=i.length,e=0,n=i.length;e<n;e++)i[e].load((function(e,n,i){Y(t,r,e,n,i)}))}(this,new k(this.c,t),t)},X.prototype.load=function(t){function e(){if(r["__mti_fntLst"+i]){var n,o=r["__mti_fntLst"+i](),s=[];if(o)for(var a=0;a<o.length;a++){var c=o[a].fontfamily;null!=o[a].fontStyle&&null!=o[a].fontWeight?(n=o[a].fontStyle+o[a].fontWeight,s.push(new S(c,n))):s.push(new S(c))}t(s)}else setTimeout((function(){e()}),50)}var n=this,i=n.a.projectId,o=n.a.version;if(i){var r=n.c.o;m(this.c,(n.a.api||"https://fast.fonts.net/jsapi")+"/"+i+".js"+(o?"?v="+o:""),(function(o){o?t([]):(r["__MonotypeConfiguration__"+i]=function(){return n.a},e())})).id="__MonotypeAPIScript__"+i}else t([])},q.prototype.load=function(t){var e,n,i=this.a.urls||[],o=this.a.families||[],r=this.a.testStrings||{},s=new y;for(e=0,n=i.length;e<n;e++)v(this.c,i[e],g(s));var a=[];for(e=0,n=o.length;e<n;e++)if((i=o[e].split(":"))[1])for(var c=i[1].split(","),h=0;h<c.length;h+=1)a.push(new S(i[0],c[h]));else a.push(new S(i[0]));_(s,(function(){t(a,r)}))};var J="https://fonts.googleapis.com/css";function Z(t){this.f=t,this.a=[],this.c={}}var Q={latin:"BESbswy","latin-ext":"çöüğş",cyrillic:"йяЖ",greek:"αβΣ",khmer:"កខគ",Hanuman:"កខគ"},$={thin:"1",extralight:"2","extra-light":"2",ultralight:"2","ultra-light":"2",light:"3",regular:"4",book:"4",medium:"5","semi-bold":"6",semibold:"6","demi-bold":"6",demibold:"6",bold:"7","extra-bold":"8",extrabold:"8","ultra-bold":"8",ultrabold:"8",black:"9",heavy:"9",l:"3",r:"4",b:"7"},tt={i:"i",italic:"i",n:"n",normal:"n"},et=/^(thin|(?:(?:extra|ultra)-?)?light|regular|book|medium|(?:(?:semi|demi|extra|ultra)-?)?bold|black|heavy|l|r|b|[1-9]00)?(n|i|normal|italic)?$/;function nt(t,e){this.c=t,this.a=e}var it={Arimo:!0,Cousine:!0,Tinos:!0};function ot(t,e){this.c=t,this.a=e}function rt(t,e){this.c=t,this.f=e,this.a=[]}nt.prototype.load=function(t){var e=new y,n=this.c,i=new K(this.a.api,this.a.text),o=this.a.families;!function(t,e){for(var n=e.length,i=0;i<n;i++){var o=e[i].split(":");3==o.length&&t.f.push(o.pop());var r="";2==o.length&&""!=o[1]&&(r=":"),t.a.push(o.join(r))}}(i,o);var r=new Z(o);!function(t){for(var e=t.f.length,n=0;n<e;n++){var i=t.f[n].split(":"),o=i[0].replace(/\+/g," "),r=["n4"];if(2<=i.length){var s;if(s=[],a=i[1])for(var a,c=(a=a.split(",")).length,h=0;h<c;h++){var u;if((u=a[h]).match(/^[\w-]+$/))if(null==(l=et.exec(u.toLowerCase())))u="";else{if(u=null==(u=l[2])||""==u?"n":tt[u],null==(l=l[1])||""==l)l="4";else var l=$[l]||(isNaN(l)?"4":l.substr(0,1));u=[u,l].join("")}else u="";u&&s.push(u)}0<s.length&&(r=s),3==i.length&&(s=[],0<(i=(i=i[2])?i.split(","):s).length&&(i=Q[i[0]])&&(t.c[o]=i))}for(t.c[o]||(i=Q[o])&&(t.c[o]=i),i=0;i<r.length;i+=1)t.a.push(new S(o,r[i]))}}(r),v(n,function(t){if(0==t.a.length)throw Error("No fonts to load!");if(-1!=t.c.indexOf("kit="))return t.c;for(var e=t.a.length,n=[],i=0;i<e;i++)n.push(t.a[i].replace(/ /g,"+"));return e=t.c+"?family="+n.join("%7C"),0<t.f.length&&(e+="&subset="+t.f.join(",")),0<t.g.length&&(e+="&text="+encodeURIComponent(t.g)),e}(i),g(e)),_(e,(function(){t(r.a,r.c,it)}))},ot.prototype.load=function(t){var e=this.a.id,n=this.c.o;e?m(this.c,(this.a.api||"https://use.typekit.net")+"/"+e+".js",(function(e){if(e)t([]);else if(n.Typekit&&n.Typekit.config&&n.Typekit.config.fn){e=n.Typekit.config.fn;for(var i=[],o=0;o<e.length;o+=2)for(var r=e[o],s=e[o+1],a=0;a<s.length;a++)i.push(new S(r,s[a]));try{n.Typekit.load({events:!1,classes:!1,async:!0})}catch(t){}t(i)}}),2e3):t([])},rt.prototype.load=function(t){var e=this.f.id,n=this.c.o,i=this;e?(n.__webfontfontdeckmodule__||(n.__webfontfontdeckmodule__={}),n.__webfontfontdeckmodule__[e]=function(e,n){for(var o=0,r=n.fonts.length;o<r;++o){var s=n.fonts[o];i.a.push(new S(s.name,O("font-weight:"+s.weight+";font-style:"+s.style)))}t(i.a)},m(this.c,(this.f.api||"https://f.fontdeck.com/s/css/js/")+function(t){return t.o.location.hostname||t.a.location.hostname}(this.c)+"/"+e+".js",(function(e){e&&t([])}))):t([])};var st=new W(window);st.a.c.custom=function(t,e){return new q(e,t)},st.a.c.fontdeck=function(t,e){return new rt(e,t)},st.a.c.monotype=function(t,e){return new X(e,t)},st.a.c.typekit=function(t,e){return new ot(e,t)},st.a.c.google=function(t,e){return new nt(e,t)};var at={load:s(st.load,st)};void 0===(i=function(){return at}.call(e,n,e,t))||(t.exports=i)}()},3355:(t,e,n)=>{"use strict";n.r(e),n.d(e,{clearInterval:()=>s,clearTimeout:()=>a,setInterval:()=>c,setTimeout:()=>h});var i=n(6650);let o=null;const r=((t,e)=>()=>{if(null!==o)return o;const n=new Blob([e],{type:"application/javascript; charset=utf-8"}),i=URL.createObjectURL(n);return o=t(i),o.setTimeout((()=>URL.revokeObjectURL(i)),0),o})((t=>{const e=new Map([[0,()=>{}]]),n=new Map([[0,()=>{}]]),o=new Map,r=new Worker(t);r.addEventListener("message",(({data:t})=>{if(void 0!==(i=t).method&&"call"===i.method){const{params:{timerId:i,timerType:r}}=t;if("interval"===r){const t=e.get(i);if("number"==typeof t){const e=o.get(t);if(void 0===e||e.timerId!==i||e.timerType!==r)throw new Error("The timer is in an undefined state.")}else{if(void 0===t)throw new Error("The timer is in an undefined state.");t()}}else if("timeout"===r){const t=n.get(i);if("number"==typeof t){const e=o.get(t);if(void 0===e||e.timerId!==i||e.timerType!==r)throw new Error("The timer is in an undefined state.")}else{if(void 0===t)throw new Error("The timer is in an undefined state.");t(),n.delete(i)}}}else{if(!(t=>null===t.error&&"number"==typeof t.id)(t)){const{error:{message:e}}=t;throw new Error(e)}{const{id:i}=t,r=o.get(i);if(void 0===r)throw new Error("The timer is in an undefined state.");const{timerId:s,timerType:a}=r;o.delete(i),"interval"===a?e.delete(s):n.delete(s)}}var i}));return{clearInterval:t=>{const n=(0,i.generateUniqueNumber)(o);o.set(n,{timerId:t,timerType:"interval"}),e.set(t,n),r.postMessage({id:n,method:"clear",params:{timerId:t,timerType:"interval"}})},clearTimeout:t=>{const e=(0,i.generateUniqueNumber)(o);o.set(e,{timerId:t,timerType:"timeout"}),n.set(t,e),r.postMessage({id:e,method:"clear",params:{timerId:t,timerType:"timeout"}})},setInterval:(t,n)=>{const o=(0,i.generateUniqueNumber)(e);return e.set(o,(()=>{t(),"function"==typeof e.get(o)&&r.postMessage({id:null,method:"set",params:{delay:n,now:performance.now(),timerId:o,timerType:"interval"}})})),r.postMessage({id:null,method:"set",params:{delay:n,now:performance.now(),timerId:o,timerType:"interval"}}),o},setTimeout:(t,e)=>{const o=(0,i.generateUniqueNumber)(n);return n.set(o,t),r.postMessage({id:null,method:"set",params:{delay:e,now:performance.now(),timerId:o,timerType:"timeout"}}),o}}}),'(()=>{"use strict";const e=new Map,t=new Map,r=(e,t)=>{let r,o;const i=performance.now();r=i,o=e-Math.max(0,i-t);return{expected:r+o,remainingDelay:o}},o=(e,t,r,i)=>{const s=performance.now();s>r?postMessage({id:null,method:"call",params:{timerId:t,timerType:i}}):e.set(t,setTimeout(o,r-s,e,t,r,i))};addEventListener("message",(i=>{let{data:s}=i;try{if("clear"===s.method){const{id:r,params:{timerId:o,timerType:i}}=s;if("interval"===i)(t=>{const r=e.get(t);if(void 0===r)throw new Error(\'There is no interval scheduled with the given id "\'.concat(t,\'".\'));clearTimeout(r),e.delete(t)})(o),postMessage({error:null,id:r});else{if("timeout"!==i)throw new Error(\'The given type "\'.concat(i,\'" is not supported\'));(e=>{const r=t.get(e);if(void 0===r)throw new Error(\'There is no timeout scheduled with the given id "\'.concat(e,\'".\'));clearTimeout(r),t.delete(e)})(o),postMessage({error:null,id:r})}}else{if("set"!==s.method)throw new Error(\'The given method "\'.concat(s.method,\'" is not supported\'));{const{params:{delay:i,now:n,timerId:a,timerType:d}}=s;if("interval"===d)((t,i,s)=>{const{expected:n,remainingDelay:a}=r(t,s);e.set(i,setTimeout(o,a,e,i,n,"interval"))})(i,a,n);else{if("timeout"!==d)throw new Error(\'The given type "\'.concat(d,\'" is not supported\'));((e,i,s)=>{const{expected:n,remainingDelay:a}=r(e,s);t.set(i,setTimeout(o,a,t,i,n,"timeout"))})(i,a,n)}}}}catch(e){postMessage({error:{message:e.message},id:s.id,result:null})}}))})();'),s=t=>r().clearInterval(t),a=t=>r().clearTimeout(t),c=(t,e)=>r().setInterval(t,e),h=(t,e)=>r().setTimeout(t,e)},9998:function(t){t.exports=function(){"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function i(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}function o(){return o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},o.apply(this,arguments)}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}function s(t){return s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},s(t)}function a(t,e){return a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},a(t,e)}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function h(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t,e){if(e&&("object"==typeof e||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return h(t)}function l(t){var e=c();return function(){var n,i=s(t);if(e){var o=s(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return u(this,n)}}function p(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=s(t)););return t}function d(t,e,n){return d="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=p(t,e);if(i){var o=Object.getOwnPropertyDescriptor(i,e);return o.get?o.get.call(n):o.value}},d(t,e,n||t)}function f(t,e){if(t){if("string"==typeof t)return v(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(t,e):void 0}}function v(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function m(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=f(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,s=!0,a=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){a=!0,r=t},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw r}}}}var y=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,g=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],_=function(t){var e=t,n=t.indexOf("["),i=t.indexOf("]");-1!=n&&-1!=i&&(t=t.substring(0,n)+t.substring(n,i).replace(/:/g,";")+t.substring(i,t.length));for(var o=y.exec(t||""),r={},s=14;s--;)r[g[s]]=o[s]||"";return-1!=n&&-1!=i&&(r.source=e,r.host=r.host.substring(1,r.host.length-1).replace(/;/g,":"),r.authority=r.authority.replace("[","").replace("]","").replace(/;/g,":"),r.ipv6uri=!0),r.pathNames=b(r,r.path),r.queryKey=E(r,r.query),r};function b(t,e){var n=/\/{2,9}/g,i=e.replace(n,"/").split("/");return"/"!=e.substr(0,1)&&0!==e.length||i.splice(0,1),"/"==e.substr(e.length-1,1)&&i.splice(i.length-1,1),i}function E(t,e){var n={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,(function(t,e,i){e&&(n[e]=i)})),n}function S(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,i=t;n=n||"undefined"!=typeof location&&location,null==t&&(t=n.protocol+"//"+n.host),"string"==typeof t&&("/"===t.charAt(0)&&(t="/"===t.charAt(1)?n.protocol+t:n.host+t),/^(https?|wss?):\/\//.test(t)||(t=void 0!==n?n.protocol+"//"+t:"https://"+t),i=_(t)),i.port||(/^(http|ws)$/.test(i.protocol)?i.port="80":/^(http|ws)s$/.test(i.protocol)&&(i.port="443")),i.path=i.path||"/";var o=-1!==i.host.indexOf(":")?"["+i.host+"]":i.host;return i.id=i.protocol+"://"+o+":"+i.port+e,i.href=i.protocol+"://"+o+(n&&n.port===i.port?"":":"+i.port),i}var w={exports:{}};try{w.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(t){w.exports=!1}var T=w.exports,C="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")();function O(t){var e=t.xdomain;try{if("undefined"!=typeof XMLHttpRequest&&(!e||T))return new XMLHttpRequest}catch(t){}if(!e)try{return new(C[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(t){}}function k(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return n.reduce((function(e,n){return t.hasOwnProperty(n)&&(e[n]=t[n]),e}),{})}var P=setTimeout,M=clearTimeout;function R(t,e){e.useNativeTimers?(t.setTimeoutFn=P.bind(C),t.clearTimeoutFn=M.bind(C)):(t.setTimeoutFn=setTimeout.bind(C),t.clearTimeoutFn=clearTimeout.bind(C))}var A=x;function x(t){if(t)return L(t)}function L(t){for(var e in x.prototype)t[e]=x.prototype[e];return t}x.prototype.on=x.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},x.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this},x.prototype.off=x.prototype.removeListener=x.prototype.removeAllListeners=x.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,i=this._callbacks["$"+t];if(!i)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var o=0;o<i.length;o++)if((n=i[o])===e||n.fn===e){i.splice(o,1);break}return 0===i.length&&delete this._callbacks["$"+t],this},x.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),n=this._callbacks["$"+t],i=1;i<arguments.length;i++)e[i-1]=arguments[i];if(n){i=0;for(var o=(n=n.slice(0)).length;i<o;++i)n[i].apply(this,e)}return this},x.prototype.emitReserved=x.prototype.emit,x.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},x.prototype.hasListeners=function(t){return!!this.listeners(t).length};var D=Object.create(null);D.open="0",D.close="1",D.ping="2",D.pong="3",D.message="4",D.upgrade="5",D.noop="6";var N=Object.create(null);Object.keys(D).forEach((function(t){N[D[t]]=t}));for(var B={type:"error",data:"parser error"},I="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),G="function"==typeof ArrayBuffer,j=function(t){return"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer},V=function(t,e,n){var i=t.type,o=t.data;return I&&o instanceof Blob?e?n(o):F(o,n):G&&(o instanceof ArrayBuffer||j(o))?e?n(o):F(new Blob([o]),n):n(D[i]+(o||""))},F=function(t,e){var n=new FileReader;return n.onload=function(){var t=n.result.split(",")[1];e("b"+t)},n.readAsDataURL(t)},z="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",H="undefined"==typeof Uint8Array?[]:new Uint8Array(256),U=0;U<z.length;U++)H[z.charCodeAt(U)]=U;var W,Y=function(t){var e,n,i,o,r,s=.75*t.length,a=t.length,c=0;"="===t[t.length-1]&&(s--,"="===t[t.length-2]&&s--);var h=new ArrayBuffer(s),u=new Uint8Array(h);for(e=0;e<a;e+=4)n=H[t.charCodeAt(e)],i=H[t.charCodeAt(e+1)],o=H[t.charCodeAt(e+2)],r=H[t.charCodeAt(e+3)],u[c++]=n<<2|i>>4,u[c++]=(15&i)<<4|o>>2,u[c++]=(3&o)<<6|63&r;return h},X="function"==typeof ArrayBuffer,q=function(t,e){if("string"!=typeof t)return{type:"message",data:J(t,e)};var n=t.charAt(0);return"b"===n?{type:"message",data:K(t.substring(1),e)}:N[n]?t.length>1?{type:N[n],data:t.substring(1)}:{type:N[n]}:B},K=function(t,e){if(X){var n=Y(t);return J(n,e)}return{base64:!0,data:t}},J=function(t,e){return"blob"===e&&t instanceof ArrayBuffer?new Blob([t]):t},Z=String.fromCharCode(30),Q=function(t,e){var n=t.length,i=new Array(n),o=0;t.forEach((function(t,r){V(t,!1,(function(t){i[r]=t,++o===n&&e(i.join(Z))}))}))},$=function(t,e){for(var n=t.split(Z),i=[],o=0;o<n.length;o++){var r=q(n[o],e);if(i.push(r),"error"===r.type)break}return i},tt=4,et=function(t){r(o,t);var n=l(o);function o(t){var i;return e(this,o),(i=n.call(this)).writable=!1,R(h(i),t),i.opts=t,i.query=t.query,i.readyState="",i.socket=t.socket,i}return i(o,[{key:"onError",value:function(t,e){var n=new Error(t);return n.type="TransportError",n.description=e,d(s(o.prototype),"emit",this).call(this,"error",n),this}},{key:"open",value:function(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this}},{key:"close",value:function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}},{key:"send",value:function(t){"open"===this.readyState&&this.write(t)}},{key:"onOpen",value:function(){this.readyState="open",this.writable=!0,d(s(o.prototype),"emit",this).call(this,"open")}},{key:"onData",value:function(t){var e=q(t,this.socket.binaryType);this.onPacket(e)}},{key:"onPacket",value:function(t){d(s(o.prototype),"emit",this).call(this,"packet",t)}},{key:"onClose",value:function(){this.readyState="closed",d(s(o.prototype),"emit",this).call(this,"close")}}]),o}(A),nt="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),it=64,ot={},rt=0,st=0;function at(t){var e="";do{e=nt[t%it]+e,t=Math.floor(t/it)}while(t>0);return e}function ct(t){var e=0;for(st=0;st<t.length;st++)e=e*it+ot[t.charAt(st)];return e}function ht(){var t=at(+new Date);return t!==W?(rt=0,W=t):t+"."+at(rt++)}for(;st<it;st++)ot[nt[st]]=st;ht.encode=at,ht.decode=ct;var ut=ht,lt={encode:function(t){var e="";for(var n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e},decode:function(t){for(var e={},n=t.split("&"),i=0,o=n.length;i<o;i++){var r=n[i].split("=");e[decodeURIComponent(r[0])]=decodeURIComponent(r[1])}return e}},pt=function(t){r(o,t);var n=l(o);function o(){var t;return e(this,o),(t=n.apply(this,arguments)).polling=!1,t}return i(o,[{key:"name",get:function(){return"polling"}},{key:"doOpen",value:function(){this.poll()}},{key:"pause",value:function(t){var e=this;this.readyState="pausing";var n=function(){e.readyState="paused",t()};if(this.polling||!this.writable){var i=0;this.polling&&(i++,this.once("pollComplete",(function(){--i||n()}))),this.writable||(i++,this.once("drain",(function(){--i||n()})))}else n()}},{key:"poll",value:function(){this.polling=!0,this.doPoll(),this.emit("poll")}},{key:"onData",value:function(t){var e=this,n=function(t){if("opening"===e.readyState&&"open"===t.type&&e.onOpen(),"close"===t.type)return e.onClose(),!1;e.onPacket(t)};$(t,this.socket.binaryType).forEach(n),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState&&this.poll())}},{key:"doClose",value:function(){var t=this,e=function(){t.write([{type:"close"}])};"open"===this.readyState?e():this.once("open",e)}},{key:"write",value:function(t){var e=this;this.writable=!1,Q(t,(function(t){e.doWrite(t,(function(){e.writable=!0,e.emit("drain")}))}))}},{key:"uri",value:function(){var t=this.query||{},e=this.opts.secure?"https":"http",n="";!1!==this.opts.timestampRequests&&(t[this.opts.timestampParam]=ut()),this.supportsBinary||t.sid||(t.b64=1),this.opts.port&&("https"===e&&443!==Number(this.opts.port)||"http"===e&&80!==Number(this.opts.port))&&(n=":"+this.opts.port);var i=lt.encode(t);return e+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+n+this.opts.path+(i.length?"?"+i:"")}}]),o}(et);function dt(){}var ft=null!=new O({xdomain:!1}).responseType,vt=function(t){r(s,t);var n=l(s);function s(t){var i;if(e(this,s),i=n.call(this,t),"undefined"!=typeof location){var o="https:"===location.protocol,r=location.port;r||(r=o?"443":"80"),i.xd="undefined"!=typeof location&&t.hostname!==location.hostname||r!==t.port,i.xs=t.secure!==o}var a=t&&t.forceBase64;return i.supportsBinary=ft&&!a,i}return i(s,[{key:"request",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o(t,{xd:this.xd,xs:this.xs},this.opts),new mt(this.uri(),t)}},{key:"doWrite",value:function(t,e){var n=this,i=this.request({method:"POST",data:t});i.on("success",e),i.on("error",(function(t){n.onError("xhr post error",t)}))}},{key:"doPoll",value:function(){var t=this,e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(function(e){t.onError("xhr poll error",e)})),this.pollXhr=e}}]),s}(pt),mt=function(t){r(o,t);var n=l(o);function o(t,i){var r;return e(this,o),R(h(r=n.call(this)),i),r.opts=i,r.method=i.method||"GET",r.uri=t,r.async=!1!==i.async,r.data=void 0!==i.data?i.data:null,r.create(),r}return i(o,[{key:"create",value:function(){var t=this,e=k(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");e.xdomain=!!this.opts.xd,e.xscheme=!!this.opts.xs;var n=this.xhr=new O(e);try{n.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders)for(var i in n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0),this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(i)&&n.setRequestHeader(i,this.opts.extraHeaders[i])}catch(t){}if("POST"===this.method)try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(t){}try{n.setRequestHeader("Accept","*/*")}catch(t){}"withCredentials"in n&&(n.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(n.timeout=this.opts.requestTimeout),n.onreadystatechange=function(){4===n.readyState&&(200===n.status||1223===n.status?t.onLoad():t.setTimeoutFn((function(){t.onError("number"==typeof n.status?n.status:0)}),0))},n.send(this.data)}catch(e){return void this.setTimeoutFn((function(){t.onError(e)}),0)}"undefined"!=typeof document&&(this.index=o.requestsCount++,o.requests[this.index]=this)}},{key:"onSuccess",value:function(){this.emit("success"),this.cleanup()}},{key:"onData",value:function(t){this.emit("data",t),this.onSuccess()}},{key:"onError",value:function(t){this.emit("error",t),this.cleanup(!0)}},{key:"cleanup",value:function(t){if(void 0!==this.xhr&&null!==this.xhr){if(this.xhr.onreadystatechange=dt,t)try{this.xhr.abort()}catch(t){}"undefined"!=typeof document&&delete o.requests[this.index],this.xhr=null}}},{key:"onLoad",value:function(){var t=this.xhr.responseText;null!==t&&this.onData(t)}},{key:"abort",value:function(){this.cleanup()}}]),o}(A);function yt(){for(var t in mt.requests)mt.requests.hasOwnProperty(t)&&mt.requests[t].abort()}mt.requestsCount=0,mt.requests={},"undefined"!=typeof document&&("function"==typeof attachEvent?attachEvent("onunload",yt):"function"==typeof addEventListener&&addEventListener("onpagehide"in C?"pagehide":"unload",yt,!1));var gt="function"==typeof Promise&&"function"==typeof Promise.resolve?function(t){return Promise.resolve().then(t)}:function(t,e){return e(t,0)},_t=C.WebSocket||C.MozWebSocket,bt=!0,Et="arraybuffer",St="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase(),wt=function(t){r(o,t);var n=l(o);function o(t){var i;return e(this,o),(i=n.call(this,t)).supportsBinary=!t.forceBase64,i}return i(o,[{key:"name",get:function(){return"websocket"}},{key:"doOpen",value:function(){if(this.check()){var t=this.uri(),e=this.opts.protocols,n=St?{}:k(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=bt&&!St?e?new _t(t,e):new _t(t):new _t(t,e,n)}catch(t){return this.emit("error",t)}this.ws.binaryType=this.socket.binaryType||Et,this.addEventListeners()}}},{key:"addEventListeners",value:function(){var t=this;this.ws.onopen=function(){t.opts.autoUnref&&t.ws._socket.unref(),t.onOpen()},this.ws.onclose=this.onClose.bind(this),this.ws.onmessage=function(e){return t.onData(e.data)},this.ws.onerror=function(e){return t.onError("websocket error",e)}}},{key:"write",value:function(t){var e=this;this.writable=!1;for(var n=function(n){var i=t[n],o=n===t.length-1;V(i,e.supportsBinary,(function(t){try{bt&&e.ws.send(t)}catch(t){}o&&gt((function(){e.writable=!0,e.emit("drain")}),e.setTimeoutFn)}))},i=0;i<t.length;i++)n(i)}},{key:"doClose",value:function(){void 0!==this.ws&&(this.ws.close(),this.ws=null)}},{key:"uri",value:function(){var t=this.query||{},e=this.opts.secure?"wss":"ws",n="";this.opts.port&&("wss"===e&&443!==Number(this.opts.port)||"ws"===e&&80!==Number(this.opts.port))&&(n=":"+this.opts.port),this.opts.timestampRequests&&(t[this.opts.timestampParam]=ut()),this.supportsBinary||(t.b64=1);var i=lt.encode(t);return e+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+n+this.opts.path+(i.length?"?"+i:"")}},{key:"check",value:function(){return!(!_t||"__initialize"in _t&&this.name===o.prototype.name)}}]),o}(et),Tt={websocket:wt,polling:vt},Ct=function(n){r(a,n);var s=l(a);function a(n){var i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e(this,a),i=s.call(this),n&&"object"===t(n)&&(r=n,n=null),n?(n=_(n),r.hostname=n.host,r.secure="https"===n.protocol||"wss"===n.protocol,r.port=n.port,n.query&&(r.query=n.query)):r.host&&(r.hostname=_(r.host).host),R(h(i),r),i.secure=null!=r.secure?r.secure:"undefined"!=typeof location&&"https:"===location.protocol,r.hostname&&!r.port&&(r.port=i.secure?"443":"80"),i.hostname=r.hostname||("undefined"!=typeof location?location.hostname:"localhost"),i.port=r.port||("undefined"!=typeof location&&location.port?location.port:i.secure?"443":"80"),i.transports=r.transports||["polling","websocket"],i.readyState="",i.writeBuffer=[],i.prevBufferLen=0,i.opts=o({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!0},r),i.opts.path=i.opts.path.replace(/\/$/,"")+"/","string"==typeof i.opts.query&&(i.opts.query=lt.decode(i.opts.query)),i.id=null,i.upgrades=null,i.pingInterval=null,i.pingTimeout=null,i.pingTimeoutTimer=null,"function"==typeof addEventListener&&(i.opts.closeOnBeforeunload&&addEventListener("beforeunload",(function(){i.transport&&(i.transport.removeAllListeners(),i.transport.close())}),!1),"localhost"!==i.hostname&&(i.offlineEventListener=function(){i.onClose("transport close")},addEventListener("offline",i.offlineEventListener,!1))),i.open(),i}return i(a,[{key:"createTransport",value:function(t){var e=Ot(this.opts.query);e.EIO=tt,e.transport=t,this.id&&(e.sid=this.id);var n=o({},this.opts.transportOptions[t],this.opts,{query:e,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return new Tt[t](n)}},{key:"open",value:function(){var t,e=this;if(this.opts.rememberUpgrade&&a.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))t="websocket";else{if(0===this.transports.length)return void this.setTimeoutFn((function(){e.emitReserved("error","No transports available")}),0);t=this.transports[0]}this.readyState="opening";try{t=this.createTransport(t)}catch(t){return this.transports.shift(),void this.open()}t.open(),this.setTransport(t)}},{key:"setTransport",value:function(t){var e=this;this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",(function(){e.onClose("transport close")}))}},{key:"probe",value:function(t){var e=this,n=this.createTransport(t),i=!1;a.priorWebsocketSuccess=!1;var o=function(){i||(n.send([{type:"ping",data:"probe"}]),n.once("packet",(function(t){if(!i)if("pong"===t.type&&"probe"===t.data){if(e.upgrading=!0,e.emitReserved("upgrading",n),!n)return;a.priorWebsocketSuccess="websocket"===n.name,e.transport.pause((function(){i||"closed"!==e.readyState&&(l(),e.setTransport(n),n.send([{type:"upgrade"}]),e.emitReserved("upgrade",n),n=null,e.upgrading=!1,e.flush())}))}else{var o=new Error("probe error");o.transport=n.name,e.emitReserved("upgradeError",o)}})))};function r(){i||(i=!0,l(),n.close(),n=null)}var s=function(t){var i=new Error("probe error: "+t);i.transport=n.name,r(),e.emitReserved("upgradeError",i)};function c(){s("transport closed")}function h(){s("socket closed")}function u(t){n&&t.name!==n.name&&r()}var l=function(){n.removeListener("open",o),n.removeListener("error",s),n.removeListener("close",c),e.off("close",h),e.off("upgrading",u)};n.once("open",o),n.once("error",s),n.once("close",c),this.once("close",h),this.once("upgrading",u),n.open()}},{key:"onOpen",value:function(){if(this.readyState="open",a.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush(),"open"===this.readyState&&this.opts.upgrade&&this.transport.pause)for(var t=0,e=this.upgrades.length;t<e;t++)this.probe(this.upgrades[t])}},{key:"onPacket",value:function(t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":var e=new Error("server error");e.code=t.data,this.onError(e);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data)}}},{key:"onHandshake",value:function(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.onOpen(),"closed"!==this.readyState&&this.resetPingTimeout()}},{key:"resetPingTimeout",value:function(){var t=this;this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn((function(){t.onClose("ping timeout")}),this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}},{key:"onDrain",value:function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}},{key:"flush",value:function(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emitReserved("flush"))}},{key:"write",value:function(t,e,n){return this.sendPacket("message",t,e,n),this}},{key:"send",value:function(t,e,n){return this.sendPacket("message",t,e,n),this}},{key:"sendPacket",value:function(t,e,n,i){if("function"==typeof e&&(i=e,e=void 0),"function"==typeof n&&(i=n,n=null),"closing"!==this.readyState&&"closed"!==this.readyState){(n=n||{}).compress=!1!==n.compress;var o={type:t,data:e,options:n};this.emitReserved("packetCreate",o),this.writeBuffer.push(o),i&&this.once("flush",i),this.flush()}}},{key:"close",value:function(){var t=this,e=function(){t.onClose("forced close"),t.transport.close()},n=function n(){t.off("upgrade",n),t.off("upgradeError",n),e()},i=function(){t.once("upgrade",n),t.once("upgradeError",n)};return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",(function(){t.upgrading?i():e()})):this.upgrading?i():e()),this}},{key:"onError",value:function(t){a.priorWebsocketSuccess=!1,this.emitReserved("error",t),this.onClose("transport error",t)}},{key:"onClose",value:function(t,e){"opening"!==this.readyState&&"open"!==this.readyState&&"closing"!==this.readyState||(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),"function"==typeof removeEventListener&&removeEventListener("offline",this.offlineEventListener,!1),this.readyState="closed",this.id=null,this.emitReserved("close",t,e),this.writeBuffer=[],this.prevBufferLen=0)}},{key:"filterUpgrades",value:function(t){for(var e=[],n=0,i=t.length;n<i;n++)~this.transports.indexOf(t[n])&&e.push(t[n]);return e}}]),a}(A);function Ot(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}Ct.protocol=tt;var kt="function"==typeof ArrayBuffer,Pt=function(t){return"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer},Mt=Object.prototype.toString,Rt="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Mt.call(Blob),At="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===Mt.call(File);function xt(t){return kt&&(t instanceof ArrayBuffer||Pt(t))||Rt&&t instanceof Blob||At&&t instanceof File}function Lt(e,n){if(!e||"object"!==t(e))return!1;if(Array.isArray(e)){for(var i=0,o=e.length;i<o;i++)if(Lt(e[i]))return!0;return!1}if(xt(e))return!0;if(e.toJSON&&"function"==typeof e.toJSON&&1===arguments.length)return Lt(e.toJSON(),!0);for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&Lt(e[r]))return!0;return!1}function Dt(t){var e=[],n=t.data,i=t;return i.data=Nt(n,e),i.attachments=e.length,{packet:i,buffers:e}}function Nt(e,n){if(!e)return e;if(xt(e)){var i={_placeholder:!0,num:n.length};return n.push(e),i}if(Array.isArray(e)){for(var o=new Array(e.length),r=0;r<e.length;r++)o[r]=Nt(e[r],n);return o}if("object"===t(e)&&!(e instanceof Date)){var s={};for(var a in e)e.hasOwnProperty(a)&&(s[a]=Nt(e[a],n));return s}return e}function Bt(t,e){return t.data=It(t.data,e),t.attachments=void 0,t}function It(e,n){if(!e)return e;if(e&&e._placeholder)return n[e.num];if(Array.isArray(e))for(var i=0;i<e.length;i++)e[i]=It(e[i],n);else if("object"===t(e))for(var o in e)e.hasOwnProperty(o)&&(e[o]=It(e[o],n));return e}var Gt,jt=5;!function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"}(Gt||(Gt={}));var Vt=function(){function t(){e(this,t)}return i(t,[{key:"encode",value:function(t){return t.type!==Gt.EVENT&&t.type!==Gt.ACK||!Lt(t)?[this.encodeAsString(t)]:(t.type=t.type===Gt.EVENT?Gt.BINARY_EVENT:Gt.BINARY_ACK,this.encodeAsBinary(t))}},{key:"encodeAsString",value:function(t){var e=""+t.type;return t.type!==Gt.BINARY_EVENT&&t.type!==Gt.BINARY_ACK||(e+=t.attachments+"-"),t.nsp&&"/"!==t.nsp&&(e+=t.nsp+","),null!=t.id&&(e+=t.id),null!=t.data&&(e+=JSON.stringify(t.data)),e}},{key:"encodeAsBinary",value:function(t){var e=Dt(t),n=this.encodeAsString(e.packet),i=e.buffers;return i.unshift(n),i}}]),t}(),Ft=function(n){r(a,n);var o=l(a);function a(){return e(this,a),o.call(this)}return i(a,[{key:"add",value:function(t){var e;if("string"==typeof t)(e=this.decodeString(t)).type===Gt.BINARY_EVENT||e.type===Gt.BINARY_ACK?(this.reconstructor=new Ht(e),0===e.attachments&&d(s(a.prototype),"emitReserved",this).call(this,"decoded",e)):d(s(a.prototype),"emitReserved",this).call(this,"decoded",e);else{if(!xt(t)&&!t.base64)throw new Error("Unknown type: "+t);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(e=this.reconstructor.takeBinaryData(t))&&(this.reconstructor=null,d(s(a.prototype),"emitReserved",this).call(this,"decoded",e))}}},{key:"decodeString",value:function(t){var e=0,n={type:Number(t.charAt(0))};if(void 0===Gt[n.type])throw new Error("unknown packet type "+n.type);if(n.type===Gt.BINARY_EVENT||n.type===Gt.BINARY_ACK){for(var i=e+1;"-"!==t.charAt(++e)&&e!=t.length;);var o=t.substring(i,e);if(o!=Number(o)||"-"!==t.charAt(e))throw new Error("Illegal attachments");n.attachments=Number(o)}if("/"===t.charAt(e+1)){for(var r=e+1;++e&&","!==t.charAt(e)&&e!==t.length;);n.nsp=t.substring(r,e)}else n.nsp="/";var s=t.charAt(e+1);if(""!==s&&Number(s)==s){for(var c=e+1;++e;){var h=t.charAt(e);if(null==h||Number(h)!=h){--e;break}if(e===t.length)break}n.id=Number(t.substring(c,e+1))}if(t.charAt(++e)){var u=zt(t.substr(e));if(!a.isPayloadValid(n.type,u))throw new Error("invalid payload");n.data=u}return n}},{key:"destroy",value:function(){this.reconstructor&&this.reconstructor.finishedReconstruction()}}],[{key:"isPayloadValid",value:function(e,n){switch(e){case Gt.CONNECT:return"object"===t(n);case Gt.DISCONNECT:return void 0===n;case Gt.CONNECT_ERROR:return"string"==typeof n||"object"===t(n);case Gt.EVENT:case Gt.BINARY_EVENT:return Array.isArray(n)&&n.length>0;case Gt.ACK:case Gt.BINARY_ACK:return Array.isArray(n)}}}]),a}(A);function zt(t){try{return JSON.parse(t)}catch(t){return!1}}var Ht=function(){function t(n){e(this,t),this.packet=n,this.buffers=[],this.reconPack=n}return i(t,[{key:"takeBinaryData",value:function(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){var e=Bt(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null}},{key:"finishedReconstruction",value:function(){this.reconPack=null,this.buffers=[]}}]),t}(),Ut=Object.freeze({__proto__:null,protocol:jt,get PacketType(){return Gt},Encoder:Vt,Decoder:Ft});function Wt(t,e,n){return t.on(e,n),function(){t.off(e,n)}}var Yt=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1}),Xt=function(t){r(o,t);var n=l(o);function o(t,i,r){var s;return e(this,o),(s=n.call(this)).connected=!1,s.disconnected=!0,s.receiveBuffer=[],s.sendBuffer=[],s.ids=0,s.acks={},s.flags={},s.io=t,s.nsp=i,r&&r.auth&&(s.auth=r.auth),s.io._autoConnect&&s.open(),s}return i(o,[{key:"subEvents",value:function(){if(!this.subs){var t=this.io;this.subs=[Wt(t,"open",this.onopen.bind(this)),Wt(t,"packet",this.onpacket.bind(this)),Wt(t,"error",this.onerror.bind(this)),Wt(t,"close",this.onclose.bind(this))]}}},{key:"active",get:function(){return!!this.subs}},{key:"connect",value:function(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}},{key:"open",value:function(){return this.connect()}},{key:"send",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.unshift("message"),this.emit.apply(this,e),this}},{key:"emit",value:function(t){if(Yt.hasOwnProperty(t))throw new Error('"'+t+'" is a reserved event name');for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];n.unshift(t);var o={type:Gt.EVENT,data:n,options:{}};if(o.options.compress=!1!==this.flags.compress,"function"==typeof n[n.length-1]){var r=this.ids++,s=n.pop();this._registerAckCallback(r,s),o.id=r}var a=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!a||!this.connected)||(this.connected?this.packet(o):this.sendBuffer.push(o)),this.flags={},this}},{key:"_registerAckCallback",value:function(t,e){var n=this,i=this.flags.timeout;if(void 0!==i){var o=this.io.setTimeoutFn((function(){delete n.acks[t];for(var i=0;i<n.sendBuffer.length;i++)n.sendBuffer[i].id===t&&n.sendBuffer.splice(i,1);e.call(n,new Error("operation has timed out"))}),i);this.acks[t]=function(){n.io.clearTimeoutFn(o);for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];e.apply(n,[null].concat(i))}}else this.acks[t]=e}},{key:"packet",value:function(t){t.nsp=this.nsp,this.io._packet(t)}},{key:"onopen",value:function(){var t=this;"function"==typeof this.auth?this.auth((function(e){t.packet({type:Gt.CONNECT,data:e})})):this.packet({type:Gt.CONNECT,data:this.auth})}},{key:"onerror",value:function(t){this.connected||this.emitReserved("connect_error",t)}},{key:"onclose",value:function(t){this.connected=!1,this.disconnected=!0,delete this.id,this.emitReserved("disconnect",t)}},{key:"onpacket",value:function(t){if(t.nsp===this.nsp)switch(t.type){case Gt.CONNECT:if(t.data&&t.data.sid){var e=t.data.sid;this.onconnect(e)}else this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Gt.EVENT:case Gt.BINARY_EVENT:this.onevent(t);break;case Gt.ACK:case Gt.BINARY_ACK:this.onack(t);break;case Gt.DISCONNECT:this.ondisconnect();break;case Gt.CONNECT_ERROR:this.destroy();var n=new Error(t.data.message);n.data=t.data.data,this.emitReserved("connect_error",n)}}},{key:"onevent",value:function(t){var e=t.data||[];null!=t.id&&e.push(this.ack(t.id)),this.connected?this.emitEvent(e):this.receiveBuffer.push(Object.freeze(e))}},{key:"emitEvent",value:function(t){if(this._anyListeners&&this._anyListeners.length){var e,n=m(this._anyListeners.slice());try{for(n.s();!(e=n.n()).done;)e.value.apply(this,t)}catch(t){n.e(t)}finally{n.f()}}d(s(o.prototype),"emit",this).apply(this,t)}},{key:"ack",value:function(t){var e=this,n=!1;return function(){if(!n){n=!0;for(var i=arguments.length,o=new Array(i),r=0;r<i;r++)o[r]=arguments[r];e.packet({type:Gt.ACK,id:t,data:o})}}}},{key:"onack",value:function(t){var e=this.acks[t.id];"function"==typeof e&&(e.apply(this,t.data),delete this.acks[t.id])}},{key:"onconnect",value:function(t){this.id=t,this.connected=!0,this.disconnected=!1,this.emitBuffered(),this.emitReserved("connect")}},{key:"emitBuffered",value:function(){var t=this;this.receiveBuffer.forEach((function(e){return t.emitEvent(e)})),this.receiveBuffer=[],this.sendBuffer.forEach((function(e){return t.packet(e)})),this.sendBuffer=[]}},{key:"ondisconnect",value:function(){this.destroy(),this.onclose("io server disconnect")}},{key:"destroy",value:function(){this.subs&&(this.subs.forEach((function(t){return t()})),this.subs=void 0),this.io._destroy(this)}},{key:"disconnect",value:function(){return this.connected&&this.packet({type:Gt.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}},{key:"close",value:function(){return this.disconnect()}},{key:"compress",value:function(t){return this.flags.compress=t,this}},{key:"volatile",get:function(){return this.flags.volatile=!0,this}},{key:"timeout",value:function(t){return this.flags.timeout=t,this}},{key:"onAny",value:function(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}},{key:"prependAny",value:function(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}},{key:"offAny",value:function(t){if(!this._anyListeners)return this;if(t){for(var e=this._anyListeners,n=0;n<e.length;n++)if(t===e[n])return e.splice(n,1),this}else this._anyListeners=[];return this}},{key:"listenersAny",value:function(){return this._anyListeners||[]}}]),o}(A),qt=Kt;function Kt(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}Kt.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=0==(1&Math.floor(10*e))?t-n:t+n}return 0|Math.min(t,this.max)},Kt.prototype.reset=function(){this.attempts=0},Kt.prototype.setMin=function(t){this.ms=t},Kt.prototype.setMax=function(t){this.max=t},Kt.prototype.setJitter=function(t){this.jitter=t};var Jt=function(n){r(s,n);var o=l(s);function s(n,i){var r,a;e(this,s),(r=o.call(this)).nsps={},r.subs=[],n&&"object"===t(n)&&(i=n,n=void 0),(i=i||{}).path=i.path||"/socket.io",r.opts=i,R(h(r),i),r.reconnection(!1!==i.reconnection),r.reconnectionAttempts(i.reconnectionAttempts||1/0),r.reconnectionDelay(i.reconnectionDelay||1e3),r.reconnectionDelayMax(i.reconnectionDelayMax||5e3),r.randomizationFactor(null!==(a=i.randomizationFactor)&&void 0!==a?a:.5),r.backoff=new qt({min:r.reconnectionDelay(),max:r.reconnectionDelayMax(),jitter:r.randomizationFactor()}),r.timeout(null==i.timeout?2e4:i.timeout),r._readyState="closed",r.uri=n;var c=i.parser||Ut;return r.encoder=new c.Encoder,r.decoder=new c.Decoder,r._autoConnect=!1!==i.autoConnect,r._autoConnect&&r.open(),r}return i(s,[{key:"reconnection",value:function(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection}},{key:"reconnectionAttempts",value:function(t){return void 0===t?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}},{key:"reconnectionDelay",value:function(t){var e;return void 0===t?this._reconnectionDelay:(this._reconnectionDelay=t,null===(e=this.backoff)||void 0===e||e.setMin(t),this)}},{key:"randomizationFactor",value:function(t){var e;return void 0===t?this._randomizationFactor:(this._randomizationFactor=t,null===(e=this.backoff)||void 0===e||e.setJitter(t),this)}},{key:"reconnectionDelayMax",value:function(t){var e;return void 0===t?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,null===(e=this.backoff)||void 0===e||e.setMax(t),this)}},{key:"timeout",value:function(t){return arguments.length?(this._timeout=t,this):this._timeout}},{key:"maybeReconnectOnOpen",value:function(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}},{key:"open",value:function(t){var e=this;if(~this._readyState.indexOf("open"))return this;this.engine=new Ct(this.uri,this.opts);var n=this.engine,i=this;this._readyState="opening",this.skipReconnect=!1;var o=Wt(n,"open",(function(){i.onopen(),t&&t()})),r=Wt(n,"error",(function(n){i.cleanup(),i._readyState="closed",e.emitReserved("error",n),t?t(n):i.maybeReconnectOnOpen()}));if(!1!==this._timeout){var s=this._timeout;0===s&&o();var a=this.setTimeoutFn((function(){o(),n.close(),n.emit("error",new Error("timeout"))}),s);this.opts.autoUnref&&a.unref(),this.subs.push((function(){clearTimeout(a)}))}return this.subs.push(o),this.subs.push(r),this}},{key:"connect",value:function(t){return this.open(t)}},{key:"onopen",value:function(){this.cleanup(),this._readyState="open",this.emitReserved("open");var t=this.engine;this.subs.push(Wt(t,"ping",this.onping.bind(this)),Wt(t,"data",this.ondata.bind(this)),Wt(t,"error",this.onerror.bind(this)),Wt(t,"close",this.onclose.bind(this)),Wt(this.decoder,"decoded",this.ondecoded.bind(this)))}},{key:"onping",value:function(){this.emitReserved("ping")}},{key:"ondata",value:function(t){this.decoder.add(t)}},{key:"ondecoded",value:function(t){this.emitReserved("packet",t)}},{key:"onerror",value:function(t){this.emitReserved("error",t)}},{key:"socket",value:function(t,e){var n=this.nsps[t];return n||(n=new Xt(this,t,e),this.nsps[t]=n),n}},{key:"_destroy",value:function(t){for(var e=0,n=Object.keys(this.nsps);e<n.length;e++){var i=n[e];if(this.nsps[i].active)return}this._close()}},{key:"_packet",value:function(t){for(var e=this.encoder.encode(t),n=0;n<e.length;n++)this.engine.write(e[n],t.options)}},{key:"cleanup",value:function(){this.subs.forEach((function(t){return t()})),this.subs.length=0,this.decoder.destroy()}},{key:"_close",value:function(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}},{key:"disconnect",value:function(){return this._close()}},{key:"onclose",value:function(t){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t),this._reconnection&&!this.skipReconnect&&this.reconnect()}},{key:"reconnect",value:function(){var t=this;if(this._reconnecting||this.skipReconnect)return this;var e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{var n=this.backoff.duration();this._reconnecting=!0;var i=this.setTimeoutFn((function(){e.skipReconnect||(t.emitReserved("reconnect_attempt",e.backoff.attempts),e.skipReconnect||e.open((function(n){n?(e._reconnecting=!1,e.reconnect(),t.emitReserved("reconnect_error",n)):e.onreconnect()})))}),n);this.opts.autoUnref&&i.unref(),this.subs.push((function(){clearTimeout(i)}))}}},{key:"onreconnect",value:function(){var t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}]),s}(A),Zt={};function Qt(e,n){"object"===t(e)&&(n=e,e=void 0);var i,o=S(e,(n=n||{}).path||"/socket.io"),r=o.source,s=o.id,a=o.path,c=Zt[s]&&a in Zt[s].nsps;return n.forceNew||n["force new connection"]||!1===n.multiplex||c?i=new Jt(r,n):(Zt[s]||(Zt[s]=new Jt(r,n)),i=Zt[s]),o.query&&!n.query&&(n.query=o.queryKey),i.socket(o.path,n)}return o(Qt,{Manager:Jt,Socket:Xt,io:Qt,connect:Qt}),Qt}()}},e={};function n(i){var o=e[i];if(void 0!==o)return o.exports;var r=e[i]={exports:{}};return t[i].call(r.exports,r,r.exports,n),r.exports}n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};n(3777)})();